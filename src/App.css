/* ========== CSS ПЕРЕМЕННЫЕ ДЛЯ ТЕМНОЙ/СВЕТЛОЙ ТЕМЫ ========== */

/* CSS переменные для светлой темы (по умолчанию) */
:root {
  --bg-primary: #F2F2F7;
  --bg-secondary: #f5f5f5;
  --bg-color: #ffffff;
  --bg-card: #FFFFFF;
  --text-main: #000000;
  --text-color: #1a1a1a;
  --text-secondary: #8E8E93;
  --text-hint: #999999;
  --border-color: #E5E5EA;
  --card-bg: #ffffff;
  --card-shadow: rgba(0, 0, 0, 0.1);
  --input-bg: #FFFFFF;
  --input-border: #E5E5EA;
  --button-primary: #2196F3;
  --button-primary-hover: #1976D2;
  --button-secondary: #f5f5f5;
  --button-secondary-text: #1a1a1a;
  --button-text: #ffffff;
  --success-color: #18ec23;
  --success-hover: #15d31f;
  --success-active: #3d8b40;
  --error-color: #f44336;
  --error-hover: #d32f2f;
  --warning-color: #ff9800;
  --topic-item-bg: #E3F2FD;
  --topic-item-text: #000;
  --topic-item-shadow: rgba(0, 0, 0, 0.1);
}

/* CSS переменные для темной темы */
[data-theme="dark"] {
  --bg-primary: #000000;
  --bg-secondary: #1a1a1a;
  --bg-color: #181818;
  --bg-card: #1C1C1E;
  --text-main: #FFFFFF;
  --text-color: #ffffff;
  --text-secondary: #98989E;
  --text-hint: #888888;
  --border-color: #38383A;
  --card-bg: #1C1C1E;
  --card-shadow: rgba(0, 0, 0, 0.3);
  --input-bg: #2C2C2E;
  --input-border: #38383A;
  --button-primary: #2196F3;
  --button-primary-hover: #42a5f5;
  --button-secondary: #333333;
  --button-secondary-text: #ffffff;
  --button-text: #ffffff;
  --success-color: #28a745;
  --success-hover: #218838;
  --success-active: #1e7e34;
  --error-color: #dc3545;
  --error-hover: #c82333;
  --warning-color: #ffc107;
  --topic-item-bg: #3a3a3a;
  --topic-item-text: #ffffff;
  --topic-item-shadow: rgba(0, 0, 0, 0.3);
}

/* ========== ГЛОБАЛЬНЫЕ СТИЛИ ДЛЯ TELEGRAM MINI APP ========== */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Общий контейнер для центрирования контента */
.app-wrapper {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Адаптивные размеры для мобильных устройств */
@media (max-width: 480px) {
  * {
    font-size: calc(14px + 0.5vw);
  }
}

/* Минимальные размеры для кнопок (Telegram Mini App стандарт) */
button {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* ========== КОНЕЦ ГЛОБАЛЬНЫХ СТИЛЕЙ ========== */

/* ========== QUIZ INTERFACE ========== */
.quiz-container-new {
  min-height: 100vh;
  background-color: var(--bg-color, #ffffff);
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
}

.quiz-header-new {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background-color: var(--bg-color, #ffffff);
  border-bottom: 1px solid var(--border-color, #e0e0e0);
  position: relative;
  z-index: 100;
  width: 100%;
  max-width: 100%;
}

.quiz-header-left {
  display: flex;
  align-items: center;
  gap: 15px;
}

.quiz-header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.finish-button {
  background-color: #18ec23;
  color: #fff;
  border: none;
  padding: 10px 18px;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s ease;
  position: relative;
  z-index: 1000;
  pointer-events: auto;
  min-height: 44px;
  white-space: nowrap;
}

.finish-button:hover {
  background-color: #15d31f;
}

.finish-button:active {
  background-color: #3d8b40;
}

.bot-name {
  font-size: 14px;
  color: var(--text-secondary, #666);
  font-weight: 500;
}

.back-button-new {
  background-color: #2196F3;
  color: #fff;
  border: none;
  padding: 10px 18px;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  position: relative;
  z-index: 1000;
  pointer-events: auto;
  min-height: 44px;
  white-space: nowrap;
}

.back-button-new:hover {
  background-color: #1976D2;
}

.back-button-new:active {
  background-color: #1565C0;
}

.quiz-timer-new {
  background-color: #2196F3;
  color: #fff;
  padding: 10px 18px;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  font-family: 'Courier New', monospace;
  transition: all 0.3s ease;
  min-height: 44px;
  display: flex;
  align-items: center;
  white-space: nowrap;
}

.quiz-timer-warning {
  background-color: var(--warning-color, #ff9800);
  animation: pulse 1s infinite;
}

.quiz-timer-expired {
  background-color: var(--error-color, #f44336);
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.quiz-content-new {
  flex: 1;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
}

.quiz-topic-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-main, #000);
  text-align: center;
  margin: 0;
  line-height: 1.3;
}

.question-box {
  background-color: #E3F2FD;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  width: 100%;
}

.question-image-new {
  width: 100%;
  border-radius: 10px;
  margin-bottom: 15px;
  max-height: 300px;
  object-fit: contain;
}

.question-text-new {
  font-size: 22px;
  font-weight: 600;
  color: #000000; /* Explicitly black for readability on light blue background */
  margin: 0;
  line-height: 1.5;
  text-align: center;
}

.answers-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.answer-item {
  background-color: var(--topic-item-bg, #E3F2FD);
  border-radius: 12px;
  padding: 14px 18px;
  font-size: 15px;
  color: var(--text-main, #000);
  transition: all 0.2s ease;
  border: 2px solid transparent;
  min-height: 52px;
  display: flex;
  align-items: center;
  cursor: pointer;
  width: 100%;
}

/* Свечение при наведении убрано */

/* Убираем все эффекты при нажатии на мобильных устройствах */
.answer-item:active {
  transform: none;
  box-shadow: none;
}

.answer-selected {
  background-color: #2196F3;
  border-color: #1976D2;
  border-width: 3px;
  color: #fff;
  font-weight: 600;
  /* Убрано свечение (box-shadow и transform) */
}

/* Убираем эффекты свечения на мобильных устройствах */
@media (max-width: 768px) {
  .answer-item {
    transition: none;
  }
  
  .answer-item:active {
    transform: none;
    box-shadow: none;
    background-color: var(--topic-item-bg, #E3F2FD);
  }
  
  .answer-selected {
    transform: none;
    box-shadow: none;
  }
}

.answer-correct {
  background-color: #e8f5e9;
  border-color: #18ec23;
  color: var(--text-main, #000);
  border-width: 2px;
}

.answer-incorrect {
  background-color: #ffcdd2;
  border-color: #F44336;
  color: var(--text-main, #000);
}

/* Темный режим для правильных и неправильных ответов */
body[data-theme="dark"] .answer-correct {
  background-color: var(--bg-card, #1C1C1E);
  border: 2px solid #22c55e;
  color: #22c55e;
}

body[data-theme="dark"] .answer-incorrect {
  background-color: var(--bg-card, #1C1C1E);
  border: 2px solid #ef4444;
  color: #ef4444;
}

.quiz-pagination {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 15px 20px;
  flex-wrap: nowrap;
  overflow-x: auto;
  background-color: var(--bg-secondary, #f5f5f5);
  border-top: 1px solid var(--border-color, #e0e0e0);
  /* Hide scrollbar for clean mobile look */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

.quiz-pagination::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

.pagination-dot {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: 2px solid var(--topic-item-bg, #E3F2FD);
  background-color: var(--bg-card, #ffffff);
  color: var(--text-main, #000);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0; /* Prevent buttons from shrinking */
}

.pagination-dot:hover {
  background-color: #f0f0f0;
}

.pagination-dot.active {
  background-color: #2196F3;
  border-color: #2196F3;
  color: #fff;
}

.pagination-dot.pagination-correct {
  background-color: #18ec23;
  border-color: #18ec23;
  color: #fff;
}

.pagination-dot.pagination-correct.active {
  background-color: #15d31f;
  border-color: #15d31f;
}

.pagination-dot.pagination-incorrect {
  background-color: #f44336;
  border-color: #f44336;
  color: #fff;
}

.pagination-dot.pagination-incorrect.active {
  background-color: #d32f2f;
  border-color: #d32f2f;
}

.quiz-footer {
  text-align: center;
  padding: 10px 20px;
  background-color: #f5f5f5;
  border-top: 1px solid #e0e0e0;
}

.bot-username {
  font-size: 14px;
  color: #666;
  font-weight: 500;
}

/* Topics Screen */
.topics-container {
  min-height: 100vh;
  background-color: var(--bg-secondary, #f8f9fa);
  padding: 10px 16px 20px 16px;
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
}

/* Логотип avto_GO */
.app-logo {
  text-align: center;
  font-size: 34px;
  font-weight: 700;
  margin-top: 20px;
  margin-bottom: 0;
  padding: 0;
  line-height: 1.2;
  letter-spacing: -0.5px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
}

.app-logo-text {
  display: inline-block;
}

/* Увеличение логотипа для мобильных устройств */
@media (max-width: 480px) {
  .app-logo {
    font-size: 48px;
    margin-top: 24px;
  }
}

/* Для очень маленьких экранов */
@media (max-width: 360px) {
  .app-logo {
    font-size: 44px;
}
}

/* Анимация свечения - едва заметная */
@keyframes glowAvto {
  0%, 100% {
    filter: drop-shadow(0 0 2px rgba(192, 192, 192, 0.3)) drop-shadow(0 0 3px rgba(192, 192, 192, 0.2));
}
  50% {
    filter: drop-shadow(0 0 3px rgba(192, 192, 192, 0.4)) drop-shadow(0 0 4px rgba(192, 192, 192, 0.3));
}
}

@keyframes glowGo {
  0%, 100% {
    filter: drop-shadow(0 0 2px rgba(34, 197, 94, 0.3)) drop-shadow(0 0 3px rgba(34, 197, 94, 0.2));
  }
  50% {
    filter: drop-shadow(0 0 3px rgba(34, 197, 94, 0.4)) drop-shadow(0 0 4px rgba(34, 197, 94, 0.3));
}
}

@keyframes glowGoDark {
  0%, 100% {
    filter: drop-shadow(0 0 2px rgba(50, 205, 50, 0.3)) drop-shadow(0 0 3px rgba(50, 205, 50, 0.2));
}
  50% {
    filter: drop-shadow(0 0 3px rgba(50, 205, 50, 0.4)) drop-shadow(0 0 4px rgba(50, 205, 50, 0.3));
}
}

/* Светлый режим - более контрастные цвета */
.app-logo-avto {
  background: linear-gradient(135deg, #505050 0%, #303030 50%, #404040 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: glowAvto 3s ease-in-out infinite;
}

.app-logo-go {
  background: linear-gradient(135deg, #22C55E 0%, #16A34A 50%, #15803D 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: glowGo 3s ease-in-out infinite;
}

/* Темный режим - более светлые цвета */
body[data-theme="dark"] .app-logo-avto {
  background: linear-gradient(135deg, #E0E0E0 0%, #B0B0B0 50%, #C0C0C0 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: glowAvto 3s ease-in-out infinite;
}

body[data-theme="dark"] .app-logo-go {
  background: linear-gradient(135deg, #90EE90 0%, #32CD32 50%, #228B22 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: glowGoDark 3s ease-in-out infinite;
}

@keyframes fadeInSlide {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
}
}

/* Для экрана экзамена - белый фон контейнера */
.topics-container:has(.exam-select-container) {
  background-color: var(--bg-secondary, #f8f9fa);
}

/* ========== ЭКЗАМЕН: Панель переключения между Тема и Экзамен ========== */
.mode-switch-panel {
  display: flex;
  gap: 6px;
  margin-top: 28px;
  margin-bottom: 24px;
  background-color: var(--bg-secondary, #f5f5f5);
  padding: 6px;
  border-radius: 12px;
  box-shadow: none;
}

.mode-switch-button {
  flex: 1;
  padding: 12px 16px;
  font-size: 16px;
  font-weight: 700;
  border: none;
  background-color: transparent;
  color: #1a1a1a;
  border-radius: 10px;
  cursor: pointer;
  min-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.mode-switch-button:hover:not(.active) {
  background-color: rgba(0, 0, 0, 0.05);
}

.mode-switch-button.active {
  background-color: #2196F3;
  color: #ffffff;
  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);
}

.topics-header {
  margin-top: 0;
  margin-bottom: 12px;
  animation: fadeInContent 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.08s both;
}

.topics-header-top {
  display: flex !important;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  position: relative;
  z-index: 1;
}

.analytics-button {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #ffffff;
  border: none;
  border-radius: 14px;
  padding: 12px 20px;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex !important;
  align-items: center;
  justify-content: center;
  gap: 8px;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 1;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
  position: relative;
  overflow: hidden;
  letter-spacing: 0.3px;
  min-height: 44px;
}

.analytics-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.5s ease;
}

.analytics-button:hover::before {
  left: 100%;
}

.analytics-button:hover {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
}

.analytics-button:active {
  transform: translateY(0) scale(0.98);
  box-shadow: 0 2px 10px rgba(102, 126, 234, 0.4);
}

.analytics-button:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
}

body[data-theme="dark"] .analytics-button {
  background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
  box-shadow: 0 4px 15px rgba(74, 85, 104, 0.5);
}

body[data-theme="dark"] .analytics-button:hover {
  background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
  box-shadow: 0 6px 20px rgba(74, 85, 104, 0.6);
}

.topics-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0 0 12px 0;
  text-align: left;
  line-height: 1.2;
  letter-spacing: -0.5px;
  animation: fadeInContent 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.08s both;
}

.topics-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  animation: fadeInContent 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.1s both;
}

.topic-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background-color: var(--topic-item-bg, #E3F2FD);
  border: none;
  border-radius: 12px;
  cursor: pointer;
  text-align: left;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 60px;
  width: 100%;
  box-shadow: 0 2px 4px var(--topic-item-shadow, rgba(0, 0, 0, 0.1));
  color: var(--topic-item-text, #000);
  animation: fadeInScale 0.25s cubic-bezier(0.4, 0, 0.2, 1) both;
}

.topic-item:nth-child(1) { animation-delay: 0.12s; }
.topic-item:nth-child(2) { animation-delay: 0.14s; }
.topic-item:nth-child(3) { animation-delay: 0.16s; }
.topic-item:nth-child(4) { animation-delay: 0.18s; }
.topic-item:nth-child(5) { animation-delay: 0.2s; }
.topic-item:nth-child(6) { animation-delay: 0.22s; }
.topic-item:nth-child(7) { animation-delay: 0.24s; }
.topic-item:nth-child(8) { animation-delay: 0.26s; }
.topic-item:nth-child(9) { animation-delay: 0.28s; }
.topic-item:nth-child(10) { animation-delay: 0.3s; }
.topic-item:nth-child(n+11) { animation-delay: 0.32s; }

.topic-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.topic-item:active {
  transform: scale(0.98) translateY(0);
}

.topic-number {
  font-size: 16px;
  color: var(--topic-item-text, #000);
  font-weight: 600;
}

.topic-name {
  flex: 1;
  font-size: 16px;
  color: var(--topic-item-text, #000);
  font-weight: 500;
}

.topic-count {
  font-size: 16px;
  color: var(--topic-item-text, #000);
  font-weight: 600;
}

/* Topic Detail Screen */
.topic-detail-container {
  min-height: 100vh;
  background-color: var(--bg-secondary, #f5f5f5);
  padding: 16px;
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
}

.topic-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  flex-wrap: wrap;
  gap: 10px;
}

.back-button {
  background: none;
  border: 1.5px solid #2196F3;
  font-size: 15px;
  color: #2196F3;
  cursor: pointer;
  padding: 10px 18px;
  border-radius: 10px;
  font-weight: 600;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  white-space: nowrap;
  width: auto !important;
  max-width: fit-content;
  align-self: flex-start;
  flex-shrink: 0;
}

.topic-detail-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-color, #000);
  margin: 10px 0;
  padding: 0 16px;
  text-align: center;
  line-height: 1.3;
}

.start-test-button-header {
  padding: 12px 20px;
  font-size: 15px;
  font-weight: 600;
  background-color: #2196F3;
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: none;
  min-height: 44px;
  white-space: nowrap;
}

.start-test-button-header:hover {
  background-color: #1976D2;
}

.topic-total-questions {
  font-size: 14px;
  color: var(--text-secondary, #666);
  margin: 0 0 20px 0;
  text-align: center;
}

.results-section {
  background-color: var(--topic-item-bg, #E3F2FD);
  border-radius: 15px;
  padding: 20px;
  margin-top: 20px;
}

.result-id {
  font-size: 12px;
  color: var(--button-primary, #2196F3);
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 5px;
}

.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.result-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-color, #000);
  margin: 0;
}

.progress-circle {
  position: relative;
  width: 60px;
  height: 60px;
}

.progress-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 14px;
  font-weight: 700;
  pointer-events: none;
}

.result-cards {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.result-card {
  display: flex;
  align-items: center;
  gap: 12px;
  background-color: var(--card-bg, #ffffff);
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 2px 4px var(--card-shadow, rgba(0,0,0,0.1));
}

.result-card-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  font-weight: bold;
}

.result-card-icon.green {
  background-color: #18ec23;
  color: #fff;
}

.result-card-icon.yellow {
  background-color: #ff9800;
  color: #fff;
}

.result-card-icon.purple {
  background-color: #2196F3;
  color: #fff;
  border-radius: 8px;
}

.result-card-text {
  flex: 1;
  font-size: 14px;
  color: var(--text-main, #000);
  font-weight: 500;
}

.results-history {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid var(--border-color, #d0d0d0);
}

.history-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-color, #000);
  margin: 0 0 15px 0;
}

.history-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  background-color: var(--card-bg, #ffffff);
  border-radius: 8px;
  margin-bottom: 8px;
  font-size: 12px;
  gap: 10px;
  flex-wrap: wrap;
}

.history-review-button {
  padding: 6px 12px;
  font-size: 12px;
  background-color: #2196F3;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  white-space: nowrap;
  transition: background-color 0.2s ease;
}

.history-review-button:hover {
  background-color: #1976D2;
}

.full-review-button {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  font-weight: 600;
  background-color: #2196F3;
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  margin-top: 20px;
}

.full-review-button:hover {
  background-color: #1976D2;
}

/* Full Review Screen */
.full-review-container {
  min-height: 100vh;
  background-color: var(--bg-secondary, #f5f5f5);
  padding: 20px;
}

.full-review-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 20px;
}

.full-review-title {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-color, #000);
  margin: 0;
  flex: 1;
}

.full-review-container {
  padding: 16px;
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
}

.full-review-header {
  margin-bottom: 16px;
}

.full-review-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-color, #1a1a1a);
  margin: 0 0 20px 0;
  padding: 0;
  line-height: 1.3;
  text-align: center;
}

.full-review-result-info {
  background-color: var(--topic-item-bg, #E3F2FD);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 20px;
}

/* Стили для объяснения ИИ */
.ai-explanation-block {
  margin-top: 20px;
  padding: 12px 16px;
  background-color: #f0f7ff; /* Светло-голубой фон как у exam-available-questions */
  border-radius: 10px;
  border-left: 3px solid #2196F3; /* Синяя левая граница */
  position: relative;
  overflow: hidden;
}

/* Убираем псевдоэлемент ::before, так как используем border-left */

.ai-explanation-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  font-weight: 600;
  font-size: 16px;
  color: #2196F3; /* Синий цвет как у exam-available-questions */
}

.ai-explanation-icon {
  font-size: 20px;
}

.ai-explanation-title {
  color: #2196F3; /* Синий цвет как у exam-available-questions */
}

.ai-explanation-content {
  color: #2196F3; /* Синий цвет как у exam-available-questions */
  line-height: 1.6;
  font-size: 15px;
}

.ai-explanation-loading {
  color: #2196F3; /* Синий цвет как у exam-available-questions */
  font-style: italic;
}

.ai-explanation-error {
  color: #ef5350;
  font-size: 14px;
}

.ai-explanation-text {
  color: #2196F3; /* Синий цвет как у exam-available-questions */
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Курсор печатания */
.typewriter-cursor {
  display: inline-block;
  width: 2px;
  height: 1em;
  background-color: var(--text-color, #1a1a1a);
  margin-left: 2px;
  animation: blink 1s infinite;
  vertical-align: baseline;
}

@keyframes blink {
  0%, 50% {
    opacity: 1;
  }
  51%, 100% {
    opacity: 0;
}
}

/* Темный режим для объяснения ИИ - как у exam-available-questions */
body[data-theme="dark"] .ai-explanation-block {
  background-color: rgba(33, 150, 243, 0.15); /* Полупрозрачный синий фон */
  border-left-color: #2196F3; /* Синяя левая граница */
}

body[data-theme="dark"] .typewriter-cursor {
  background-color: #64b5f6; /* Светло-синий курсор */
}

/* Темный режим для текста ИИ - как у exam-available-questions */
body[data-theme="dark"] .ai-explanation-header,
body[data-theme="dark"] .ai-explanation-title,
body[data-theme="dark"] .ai-explanation-content,
body[data-theme="dark"] .ai-explanation-loading,
body[data-theme="dark"] .ai-explanation-text {
  color: #64b5f6; /* Светло-синий цвет текста как у exam-available-questions */
}

.review-question-block {
  background-color: var(--card-bg, #ffffff);
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 2px 8px var(--card-shadow, rgba(0,0,0,0.1));
}

.review-question-image {
  width: 100%;
  max-width: 100%;
  max-height: 400px;
  height: auto;
  border-radius: 12px;
  margin-bottom: 15px;
  object-fit: contain;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.review-question-text {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-color, #000);
  margin: 0 0 15px 0;
}

.review-answer {
  padding: 12px 15px;
  border-radius: 10px;
  background-color: var(--bg-secondary, #f5f5f5);
  border: 2px solid transparent;
  font-size: 16px;
  color: var(--text-color, #000);
  text-align: left;
}

.review-answer-correct {
  background-color: #e8f5e9;
  border-color: #18ec23;
  color: var(--text-color, #000);
  box-shadow: 0 2px 8px rgba(24, 236, 35, 0.2);
}

.review-answer-incorrect {
  background-color: #ffebee;
  border-color: #F44336;
  color: var(--text-color, #000);
  box-shadow: 0 2px 8px rgba(244, 67, 54, 0.2);
}

/* Стиль для неотвеченных вопросов (желтый) - такой же как у правильных/неправильных */
.review-answer.review-answer-unanswered {
  background-color: #fff59d !important;
  border: 2px solid #ffc107 !important;
  color: var(--text-color, #000) !important;
  box-shadow: 0 2px 8px rgba(255, 193, 7, 0.2) !important;
}

/* Темный режим для правильных и неправильных ответов в просмотре */
body[data-theme="dark"] .review-answer-correct {
  background-color: var(--bg-card, #1C1C1E);
  border: 2px solid #22c55e;
  color: #22c55e;
  box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
}

body[data-theme="dark"] .review-answer-incorrect {
  background-color: var(--bg-card, #1C1C1E);
  border: 2px solid #ef4444;
  color: #ef4444;
  box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
}

/* Темный режим для неотвеченных вопросов (желтый) */
body[data-theme="dark"] .review-answer.review-answer-unanswered {
  background-color: rgba(255, 193, 7, 0.15) !important;
  border: 2px solid #ffc107 !important;
  color: #ffffff !important;
  box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3) !important;
}

/* Темный режим для всех элементов внутри неотвеченного правильного ответа */
body[data-theme="dark"] .review-answer.review-answer-unanswered * {
  color: #ffffff !important;
}

/* Admin Panel Styles */
.admin-container {
  min-height: 100vh;
  background-color: var(--bg-secondary, #f5f5f5);
  padding: 16px;
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
}

.admin-content {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  background-color: var(--bg-card, #ffffff);
  padding: 16px;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  display: flex;
  flex-direction: column;
}

.admin-header {
  margin-bottom: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.admin-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-color, #000);
  margin: 0;
  text-align: center;
  line-height: 1.3;
}

.admin-add-button {
  padding: 12px 20px;
  font-size: 15px;
  font-weight: 600;
  background-color: #18ec23;
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  flex: 1;
  min-width: 150px;
  min-height: 44px;
  transition: background-color 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.admin-add-button:hover {
  background-color: #15d31f;
}

.admin-add-topic-button {
  padding: 12px 20px;
  font-size: 15px;
  font-weight: 600;
  background-color: #2196F3;
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer !important;
  flex: 1;
  min-width: 150px;
  min-height: 44px;
  transition: background-color 0.3s ease;
  position: relative;
  z-index: 10000 !important;
  pointer-events: auto !important;
  display: flex;
  align-items: center;
  justify-content: center;
}

.admin-add-topic-button:hover {
  background-color: #1976D2;
}

.admin-stats {
  padding: 15px;
  background-color: #f0f0f0;
  border-radius: 10px;
  margin-bottom: 20px;
}

.admin-stats p {
  margin: 5px 0;
  font-size: 14px;
  color: #666;
}

.admin-topics-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.admin-topic-item {
  padding: 15px;
  background-color: var(--bg-secondary, #f9f9f9);
  border-radius: 10px;
  border: 1px solid var(--border-color, #e0e0e0);
  color: var(--text-color, #000);
}

/* Темный режим для admin-topic-item */
body[data-theme="dark"] .admin-topic-item {
  background-color: var(--bg-card, #1C1C1E);
  border-color: var(--border-color, #38383A);
  color: var(--text-main, #ffffff);
}

/* Темный режим для admin-topic-item с желтым фоном (добавленные вопросы) */
/* Используем селектор по border-color, так как он более надежный */
body[data-theme="dark"] .admin-topic-item[style*="border-color: rgb(255, 193, 7)"],
body[data-theme="dark"] .admin-topic-item[style*="borderColor: rgb(255, 193, 7)"],
body[data-theme="dark"] .admin-topic-item[style*="border-color:#ffc107"],
body[data-theme="dark"] .admin-topic-item[style*="borderColor:#ffc107"],
body[data-theme="dark"] .admin-topic-item[style*="background-color: rgb(255, 243, 205)"],
body[data-theme="dark"] .admin-topic-item[style*="background-color:#fff3cd"],
body[data-theme="dark"] .admin-topic-item[style*="backgroundColor:#fff3cd"] {
  background-color: rgba(255, 193, 7, 0.2) !important;
  border-color: #ffc107 !important;
  color: #ffffff !important;
}

/* Темный режим для текста внутри admin-topic-item с желтым фоном */
body[data-theme="dark"] .admin-topic-item[style*="border-color: rgb(255, 193, 7)"] *,
body[data-theme="dark"] .admin-topic-item[style*="borderColor: rgb(255, 193, 7)"] *,
body[data-theme="dark"] .admin-topic-item[style*="border-color:#ffc107"] *,
body[data-theme="dark"] .admin-topic-item[style*="borderColor:#ffc107"] *,
body[data-theme="dark"] .admin-topic-item[style*="background-color: rgb(255, 243, 205)"] *,
body[data-theme="dark"] .admin-topic-item[style*="background-color:#fff3cd"] *,
body[data-theme="dark"] .admin-topic-item[style*="backgroundColor:#fff3cd"] * {
  color: #ffffff !important;
}

.admin-topic-info {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
}

.admin-topic-number {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-color, #000);
  flex-shrink: 0;
}

.admin-topic-name {
  flex: 1;
  color: var(--text-color, #000);
  font-size: 16px;
  font-weight: 500;
}

.admin-topic-count {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-color, #000);
  flex-shrink: 0;
  margin-left: auto;
}

.admin-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.form-group label {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-main, #000);
}

.form-input {
  padding: 12px;
  font-size: 15px;
  border: 2px solid var(--input-border, #e0e0e0);
  border-radius: 10px;
  font-family: inherit;
  transition: border-color 0.3s ease;
  min-height: 44px;
  width: 100%;
  box-sizing: border-box;
  background-color: var(--input-bg, #ffffff);
  color: var(--text-main, #000);
}

.form-input:focus {
  outline: none;
  border-color: var(--button-primary, #2196F3);
}

.admin-submit-button {
  margin-top: 10px;
  padding: 14px;
  font-size: 16px;
  font-weight: 600;
  background-color: #2196F3;
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  width: 100%;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.admin-submit-button:hover {
  background-color: #1976D2;
}

/* ========== СТИЛИ ДЛЯ ЭКРАНА РЕГИСТРАЦИИ ========== */

/* Контейнер экрана регистрации */
.registration-screen-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px 16px;
  background-color: var(--bg-color, #f8f9fa);
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

/* Карточка регистрации */
.registration-card {
  width: 100%;
  max-width: 420px;
  background-color: var(--card-bg, #ffffff);
  border-radius: 24px;
  padding: 32px 24px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 24px;
}

/* Обертка для иконки аватарки */
.registration-icon-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 8px;
}

/* Иконка аватарки */
.registration-icon {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  box-shadow: 0 8px 24px rgba(33, 150, 243, 0.3);
  border: 4px solid rgba(255, 255, 255, 0.2);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 8px 24px rgba(33, 150, 243, 0.3);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 12px 32px rgba(33, 150, 243, 0.4);
  }
}

/* Заголовок */
.registration-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-color, #1a1a1a);
  text-align: center;
  margin: 0;
  line-height: 1.4;
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

/* Форма регистрации */
.registration-form {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 8px;
}

/* Группа полей формы */
.registration-form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 100%;
}

/* Лейбл поля */
.registration-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-color, #1a1a1a);
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.registration-label-icon {
  font-size: 18px;
}

/* Поле ввода */
.registration-input {
  width: 100%;
  height: 50px;
  padding: 0 16px;
  font-size: 16px;
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  background-color: var(--input-bg, #F5F5F5);
  border: 2px solid var(--input-border, #E0E0E0);
  border-radius: 14px;
  color: var(--text-main, #1a1a1a);
  transition: all 0.3s ease;
  box-sizing: border-box;
}

.registration-input:focus {
  outline: none;
  border-color: var(--button-primary, #2196F3);
  background-color: var(--bg-card, #ffffff);
  box-shadow: 0 0 0 4px rgba(33, 150, 243, 0.1);
}

.registration-input::placeholder {
  color: var(--text-hint, #999999);
}

/* Кнопка отправки */
.registration-submit-button {
  width: 100%;
  height: 50px;
  padding: 0 24px;
  font-size: 17px;
  font-weight: 600;
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  color: #ffffff;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
  transition: all 0.3s ease;
  margin-top: 8px;
}

.registration-submit-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
}

.registration-submit-button:active {
  transform: scale(0.98) translateY(0);
  box-shadow: 0 2px 12px rgba(102, 126, 234, 0.4);
}

.registration-button-arrow {
  font-size: 20px;
  transition: transform 0.3s ease;
}

.registration-submit-button:hover .registration-button-arrow {
  transform: translateX(4px);
}

/* Темная тема */
body[data-theme="dark"] .registration-screen-container {
  background-color: var(--bg-primary, #000000);
}

body[data-theme="dark"] .registration-card {
  background-color: var(--bg-card, #1C1C1E);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
}

body[data-theme="dark"] .registration-input {
  background-color: var(--input-bg, #2C2C2E);
  border-color: var(--input-border, #38383A);
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .registration-input:focus {
  background-color: var(--input-bg, #2C2C2E);
  border-color: var(--button-primary, #2196F3);
}

body[data-theme="dark"] .registration-icon {
  border-color: rgba(255, 255, 255, 0.1);
}

/* Адаптивность для мобильных */
@media (max-width: 480px) {
  .registration-card {
    padding: 24px 20px;
    border-radius: 20px;
  }

  .registration-title {
    font-size: 24px;
}

  .registration-icon {
    width: 70px;
    height: 70px;
    font-size: 36px;
  }
}

.admin-users-button {
  background-color: #9C27B0;
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 12px 20px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

.admin-users-button:hover {
  background-color: #7B1FA2;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(156, 39, 176, 0.3);
}

.admin-users-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 20px;
}

.admin-user-item {
  background-color: #ffffff;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 15px;
  transition: all 0.2s ease;
}

.admin-user-item:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border-color: #2196F3;
}

.admin-user-info {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.admin-user-header {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.admin-user-number {
  font-size: 16px;
  font-weight: 600;
  color: #000;
  min-width: 30px;
}

.admin-user-name {
  font-size: 18px;
  font-weight: 600;
  color: #000;
  flex: 1;
}

.admin-user-subscription-badge {
  background-color: #18ec23;
  color: #fff;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.admin-user-details {
  display: flex;
  flex-direction: column;
  gap: 5px;
  font-size: 14px;
  color: #333;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #f0f0f0;
}

.admin-user-details p {
  margin: 0;
  line-height: 1.5;
}

.admin-user-details strong {
  color: #000;
  font-weight: 600;
}

/* ========== НОВЫЙ ДИЗАЙН СПИСКА ПОЛЬЗОВАТЕЛЕЙ В СТИЛЕ TELEGRAM ========== */

/* ========== НОВЫЙ ДИЗАЙН СПИСКА ПОЛЬЗОВАТЕЛЕЙ В СТИЛЕ TELEGRAM ========== */

/* Список пользователей */
.users-list-telegram {
  display: flex;
  flex-direction: column;
  background-color: var(--bg-color);
  border-radius: 12px;
  overflow: hidden;
  margin-top: 16px;
}

/* Элемент списка пользователя */
.user-list-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  gap: 12px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  border-bottom: 1px solid var(--border-color);
  background-color: var(--card-bg);
}

.user-list-item:last-child {
  border-bottom: none;
}

.user-list-item:hover {
  background-color: var(--bg-secondary);
}

.user-list-item:active {
  background-color: var(--bg-secondary);
  opacity: 0.8;
}

/* Аватарка пользователя */
.user-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #ffffff;
  font-weight: 600;
  font-size: 18px;
  flex-shrink: 0;
}

/* Информация о пользователе */
.user-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.user-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-color);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.user-id {
  font-size: 14px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Статус подписки */
.user-status {
  flex-shrink: 0;
}

.subscription-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
}

.subscription-badge.active {
  background-color: #4CAF50;
  color: #ffffff;
}

.subscription-badge.inactive {
  background-color: var(--bg-secondary);
  color: var(--text-secondary);
}

/* Модальное окно пользователя */
.user-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  padding: 16px;
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.user-modal-content {
  background-color: var(--card-bg);
  border-radius: 24px;
  width: 100%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.3s ease;
  position: relative;
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.user-modal-header {
  padding: 24px 24px 16px;
  text-align: center;
  position: relative;
  border-bottom: 1px solid var(--border-color);
}

.user-modal-avatar-large {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #ffffff;
  font-weight: 600;
  font-size: 32px;
  margin: 0 auto 12px;
}

.user-modal-name {
  font-size: 22px;
  font-weight: 700;
  color: var(--text-color);
  margin: 0;
}

.user-modal-close {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background-color: var(--bg-secondary);
  color: var(--text-color);
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease;
}

.user-modal-close:hover {
  background-color: var(--border-color);
}

.user-modal-body {
  padding: 24px;
}

.user-detail-grid {
  display: grid;
  gap: 16px;
}

.user-detail-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.user-detail-label {
  font-size: 14px;
  color: var(--text-secondary);
  font-weight: 500;
}

.user-detail-value {
  font-size: 16px;
  color: var(--text-color);
  font-weight: 600;
}

.user-modal-actions {
  padding: 16px 24px 24px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  border-top: 1px solid var(--border-color);
}

.user-action-button {
  padding: 14px 20px;
  border-radius: 12px;
  border: none;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  min-height: 48px;
}

.user-action-button.primary {
  background-color: var(--button-primary);
  color: var(--button-text);
}

.user-action-button.primary:hover {
  background-color: var(--button-primary-hover);
}

.user-action-button.secondary {
  background-color: var(--button-secondary);
  color: var(--button-secondary-text);
}

.user-action-button.secondary:hover {
  background-color: var(--bg-secondary);
}

.user-action-button.danger {
  background-color: var(--error-color);
  color: #ffffff;
}

.user-action-button.danger:hover {
  opacity: 0.9;
}

.user-action-button:active {
  transform: scale(0.98);
}

/* Адаптивность для мобильных */
@media (max-width: 480px) {
  .user-modal-content {
    max-width: 100%;
    border-radius: 24px 24px 0 0;
    max-height: 85vh;
  }

  .user-modal-overlay {
    align-items: flex-end;
    padding: 0;
  }

  .user-list-item {
    padding: 14px 16px;
  }

  .user-avatar {
    width: 44px;
    height: 44px;
    font-size: 16px;
}
}

/* ========== СТИЛИ ДЛЯ УПРАВЛЕНИЯ ТЕМАМИ ========== */

/* Секция формы добавления новой темы */
.topic-form-section {
  background-color: var(--card-bg, #ffffff);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.topic-form-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-color, #1a1a1a);
  margin: 0 0 16px 0;
}

/* Секция существующих тем */
.topics-management-section {
  background-color: var(--card-bg, #ffffff);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.topics-management-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-color, #1a1a1a);
  margin: 0 0 16px 0;
}

.topics-management-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Элемент темы */
.topic-management-item {
  background-color: var(--card-bg, #ffffff);
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
  border: 1px solid var(--border-color, #e0e0e0);
}

.topic-management-item-draggable {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  cursor: grab;
}

.topic-management-item-draggable:active {
  cursor: grabbing;
}

.topic-management-item-draggable.dragging {
  opacity: 0.5;
}

.topic-management-item-draggable.drag-over {
  border: 2px dashed var(--button-primary, #2196F3);
}

/* Информация о теме */
.topic-management-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.topic-drag-handle {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary, #666666);
  cursor: grab;
  flex-shrink: 0;
  width: 24px;
  height: 24px;
}

.topic-drag-handle:active {
  cursor: grabbing;
}

.topic-management-number {
  font-size: 16px;
  font-weight: 500;
  color: var(--text-color, #1a1a1a);
  flex-shrink: 0;
}

.topic-management-name {
  font-size: 16px;
  font-weight: 500;
  color: var(--text-color, #1a1a1a);
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Действия с темой */
.topic-management-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.topic-action-button {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  border: none;
  background-color: transparent;
  color: var(--text-secondary, #666666);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  padding: 0;
}

.topic-action-button:hover {
  background-color: var(--bg-secondary, #f5f5f5);
  color: var(--text-color, #1a1a1a);
}

.topic-edit-button:hover {
  background-color: rgba(33, 150, 243, 0.1);
  color: var(--button-primary, #2196F3);
}

.topic-delete-button:hover {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--error-color, #f44336);
}

/* Форма редактирования темы */
.topic-edit-form {
  display: flex;
  align-items: center;
  gap: 12px;
}

.topic-edit-input {
  flex: 1;
  padding: 12px;
  font-size: 16px;
  border: 2px solid var(--button-primary, #2196F3);
  border-radius: 8px;
  font-family: inherit;
  min-height: 44px;
  box-sizing: border-box;
}

.topic-edit-input:focus {
  outline: none;
  border-color: var(--button-primary-hover, #1976D2);
}

.topic-edit-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.topic-save-button {
  background-color: var(--success-color, #18ec23) !important;
  color: #ffffff !important;
}

.topic-save-button:hover {
  background-color: var(--success-hover, #15d31f) !important;
}

.topic-cancel-button {
  background-color: var(--error-color, #f44336) !important;
  color: #ffffff !important;
}

.topic-cancel-button:hover {
  background-color: var(--error-hover, #d32f2f) !important;
}

.no-topics-message {
  text-align: center;
  color: var(--text-secondary, #666666);
  padding: 40px 20px;
  font-size: 16px;
}

/* Темная тема */
body[data-theme="dark"] .topic-form-section,
body[data-theme="dark"] .topics-management-section,
body[data-theme="dark"] .topic-management-item {
  background-color: var(--card-bg, #2d2d2d);
  border-color: var(--border-color, #424242);
}

body[data-theme="dark"] .topic-action-button:hover {
  background-color: var(--bg-secondary, #1a1a1a);
}

/* ========== СТИЛИ ДЛЯ ФОРМЫ ДОБАВЛЕНИЯ ВОПРОСА ========== */

/* Список вариантов ответов */
.answers-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 16px;
}

/* Карточка варианта ответа */
.answer-item-form {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  background-color: #ffffff;
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  border: 1px solid #e0e0e0;
  transition: all 0.2s ease;
}

.answer-item-form:focus-within {
  border-color: #2196F3;
  box-shadow: 0 2px 12px rgba(33, 150, 243, 0.15);
}

/* Буква варианта (A, B, C, D) */
.answer-letter {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-color, #1a1a1a);
  flex-shrink: 0;
  width: 24px;
  text-align: left;
  padding-top: 2px;
}

/* Контент варианта ответа */
.answer-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-width: 0;
}

/* Поле ввода варианта ответа */
.answer-input {
  width: 100%;
  padding: 12px 16px;
  font-size: 15px;
  font-family: inherit;
  background-color: #F5F5F5;
  border: 2px solid #E0E0E0;
  border-radius: 10px;
  color: var(--text-color, #1a1a1a);
  transition: all 0.3s ease;
  box-sizing: border-box;
  min-height: 44px;
}

.answer-input:focus {
  outline: none;
  border-color: #2196F3;
  background-color: #ffffff;
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
}

.answer-input::placeholder {
  color: #999999;
}

/* Чекбокс правильного ответа */
.correct-answer-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  user-select: none;
  font-size: 14px;
  color: var(--text-color, #1a1a1a);
}

.correct-answer-checkbox input[type="radio"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: #4CAF50;
  margin: 0;
}

.correct-answer-checkbox span {
  font-weight: 500;
}

/* Кнопка удаления варианта ответа */
.remove-answer-button {
  width: 36px;
  height: 36px;
  background-color: #f44336;
  color: #ffffff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 600;
  flex-shrink: 0;
  transition: all 0.2s ease;
  padding: 0;
}

.remove-answer-button:hover {
  background-color: #d32f2f;
  transform: scale(1.05);
}

.remove-answer-button:active {
  transform: scale(0.95);
}

/* Кнопка добавления варианта ответа */
.add-answer-button {
  width: 100%;
  padding: 14px 20px;
  font-size: 16px;
  font-weight: 600;
  background-color: #4CAF50;
  color: #ffffff;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.3s ease;
  min-height: 48px;
  margin-top: 8px;
}

.add-answer-button:hover {
  background-color: #45a049;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

.add-answer-button:active {
  transform: translateY(0);
}

/* Кнопка выбора изображения */
.image-upload-button {
  display: inline-block;
  padding: 14px 20px;
  font-size: 16px;
  font-weight: 600;
  background-color: #2196F3;
  color: #ffffff;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  min-height: 48px;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
}

.image-upload-button:hover {
  background-color: #1976D2;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.image-upload-button:active {
  transform: translateY(0);
}

.image-file-input {
  display: none;
}

/* Контейнер загрузки изображения */
.image-upload-container {
  width: 100%;
}

/* Контейнер редактирования изображения */
.image-edit-container {
  margin-top: 10px;
}

/* Предпросмотр изображения */
.image-preview-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 8px;
}

.image-preview {
  max-width: 100%;
  max-height: 300px;
  border-radius: 12px;
  object-fit: contain;
  border: 2px solid #e0e0e0;
  background: #f5f5f5;
}

/* Контейнер для действий с изображением */
.image-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

/* Кнопка замены изображения */
.replace-image-button {
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  background-color: #2196F3;
  color: #ffffff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  flex: 1;
  min-width: 150px;
  text-align: center;
  display: inline-block;
}

.replace-image-button:hover {
  background-color: #1976D2;
}

.replace-image-button:active {
  background-color: #1565C0;
}

.remove-image-button {
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  background-color: #f44336;
  color: #ffffff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  flex: 1;
  min-width: 120px;
}

.remove-image-button:hover {
  background-color: #d32f2f;
}

/* Кнопка "Добавить вопрос" */
.admin-submit-button {
  margin-top: 20px;
  padding: 16px 24px;
  font-size: 17px;
  font-weight: 600;
  background-color: #2196F3;
  color: #ffffff;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  width: 100%;
  min-height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.admin-submit-button:hover {
  background-color: #1976D2;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.admin-submit-button:active {
  transform: translateY(0);
}

/* Темная тема */
body[data-theme="dark"] .answer-item-form {
  background-color: var(--card-bg, #2d2d2d);
  border-color: var(--border-color, #424242);
  }

body[data-theme="dark"] .answer-input {
  background-color: #333333;
  border-color: #424242;
  color: var(--text-color, #ffffff);
}

body[data-theme="dark"] .answer-input:focus {
  background-color: #3a3a3a;
  border-color: #2196F3;
  }

body[data-theme="dark"] .image-preview {
  border-color: var(--border-color, #424242);
  background: #2a2a2a;
}

body[data-theme="dark"] .image-actions {
  gap: 10px;
}

body[data-theme="dark"] .replace-image-button {
  background-color: #1976D2;
}

body[data-theme="dark"] .replace-image-button:hover {
  background-color: #1565C0;
}

/* Переключатель режимов ввода изображения */
.image-mode-switcher {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  border-radius: 10px;
  background: #f5f5f5;
  padding: 4px;
}

.mode-switch-button {
  flex: 1;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  background-color: transparent;
  color: #666;
}

.mode-switch-button:hover {
  background-color: rgba(33, 150, 243, 0.1);
  color: #2196F3;
}

.mode-switch-button.active {
  background-color: #2196F3;
  color: #ffffff;
  box-shadow: 0 2px 4px rgba(33, 150, 243, 0.3);
}

/* Контейнер для ввода URL */
.image-url-container {
  width: 100%;
}

/* Темная тема для переключателя режимов */
body[data-theme="dark"] .image-mode-switcher {
  background: #2a2a2a;
}

body[data-theme="dark"] .mode-switch-button {
  color: #999;
}

body[data-theme="dark"] .mode-switch-button:hover {
  background-color: rgba(33, 150, 243, 0.2);
  color: #2196F3;
}

body[data-theme="dark"] .mode-switch-button.active {
  background-color: #1976D2;
  color: #ffffff;
}

/* ========== СТИЛИ ДЛЯ ЭКРАНА ЭКЗАМЕНА ========== */

/* Контейнер для экрана экзамена */
.topics-container.exam-container {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  min-height: 100vh;
  padding: 10px 16px 20px 16px;
  background-color: var(--bg-secondary, #f8f9fa);
}

/* Контейнер выбора экзамена - полноразмерный */
.exam-select-container {
  background-color: transparent;
  border-radius: 0;
  padding: 0;
  box-shadow: none;
  width: 100%;
  max-width: 100%;
  margin: 0;
  overflow: visible;
}

@keyframes fadeInContent {
  from {
    opacity: 0;
    transform: translateY(15px);
}
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Панель переключения внутри экзамена - унифицированный стиль */
.exam-select-container .mode-switch-panel {
  margin-top: 28px;
  margin-bottom: 24px;
  background-color: #f5f5f5;
  padding: 6px;
  border-bottom: none;
  display: flex;
  gap: 6px;
  border-radius: 12px;
}

.exam-select-container .mode-switch-button {
  border-radius: 10px;
  min-height: 48px;
  font-size: 16px;
  font-weight: 700;
  border: none;
  background-color: transparent;
  color: #1a1a1a;
}

.exam-select-container .mode-switch-button:not(.active):hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.exam-select-container .mode-switch-button.active {
  background-color: #2196F3;
  color: #ffffff;
  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);
}

/* Заголовок экзамена */
.exam-title {
  font-size: 28px;
  font-weight: 700;
  color: #1a1a1a;
  margin: 0 0 12px 0;
  text-align: left;
  line-height: 1.2;
  letter-spacing: -0.5px;
  animation: fadeInContent 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.08s both;
}

/* Описание экзамена */
.exam-description {
  font-size: 15px;
  color: #666666;
  line-height: 1.6;
  margin: 0 0 20px 0;
  text-align: left;
  animation: fadeInContent 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.1s both;
}

/* Информация о доступных вопросах */
.exam-available-questions {
  font-size: 16px;
  font-weight: 600;
  color: #2196F3;
  margin: 0 0 24px 0;
  text-align: left;
  padding: 12px 16px;
  background-color: #f0f7ff;
  border-radius: 10px;
  border-left: 3px solid #2196F3;
  animation: fadeInContent 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.12s both;
}

/* Список вариантов экзамена */
.exam-options-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 0;
  animation: fadeInContent 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.15s both;
}

/* Кнопка варианта экзамена */
.exam-option-button {
  width: 100%;
  padding: 24px 28px;
  background-color: #ffffff;
  border: 2px solid #e8e8e8;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  text-align: left;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 90px;
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  animation: fadeInScale 0.25s cubic-bezier(0.4, 0, 0.2, 1) both;
}

.exam-option-button:nth-child(1) {
  animation-delay: 0.18s;
}

.exam-option-button:nth-child(2) {
  animation-delay: 0.2s;
}

.exam-option-button:nth-child(3) {
  animation-delay: 0.22s;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.exam-option-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(33, 150, 243, 0.05) 0%, rgba(33, 150, 243, 0.02) 100%);
  opacity: 0;
  transition: opacity 0.25s ease;
}

.exam-option-button:hover:not(:disabled)::before {
  opacity: 1;
}

.exam-option-button:hover:not(:disabled) {
  border-color: #2196F3;
  background-color: #ffffff;
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(33, 150, 243, 0.2);
}

.exam-option-button:active:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
}

.exam-option-button:disabled {
  background-color: #f8f8f8;
  border-color: #e0e0e0;
  cursor: not-allowed;
  opacity: 0.7;
}

.exam-option-button:disabled::before {
  display: none;
}

/* Количество вопросов в варианте */
.exam-option-count {
  font-size: 19px;
  font-weight: 700;
  color: #1a1a1a;
  line-height: 1.3;
  letter-spacing: -0.3px;
}

.exam-option-button:disabled .exam-option-count {
  color: #999999;
  font-weight: 600;
}

/* Текст "недостаточно вопросов" */
.exam-option-disabled {
  font-size: 14px;
  color: #999999;
  font-weight: 400;
  line-height: 1.4;
  margin-top: 2px;
}

/* Сообщение об отсутствии вопросов */
.exam-no-questions {
  padding: 40px 20px;
  text-align: center;
  color: #666666;
}

.exam-no-questions p {
  margin: 8px 0;
  font-size: 15px;
  line-height: 1.5;
}

/* Темная тема */
body[data-theme="dark"] .topics-container {
  background-color: var(--bg-primary, #000000);
}

body[data-theme="dark"] .topics-container.exam-container {
  background-color: var(--bg-primary, #000000);
}

body[data-theme="dark"] .mode-switch-panel {
  background-color: var(--bg-secondary, #1a1a1a);
}

body[data-theme="dark"] .mode-switch-button:not(.active) {
  color: var(--text-secondary, #98989E);
}

body[data-theme="dark"] .mode-switch-button:not(.active):hover {
  background-color: rgba(255, 255, 255, 0.1);
}

body[data-theme="dark"] .topics-title {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .exam-select-container {
  background-color: transparent;
  box-shadow: none;
}

body[data-theme="dark"] .exam-select-container .mode-switch-panel {
  background-color: var(--bg-secondary, #1a1a1a);
}

body[data-theme="dark"] .exam-select-container .mode-switch-button:not(.active) {
  color: var(--text-secondary, #98989E);
}

body[data-theme="dark"] .exam-select-container .mode-switch-button:not(.active):hover {
  background-color: rgba(255, 255, 255, 0.1);
}

body[data-theme="dark"] .exam-title {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .exam-description {
  color: var(--text-secondary, #98989E);
}

body[data-theme="dark"] .exam-available-questions {
  background-color: rgba(33, 150, 243, 0.15);
  border-left-color: #2196F3;
  color: #64b5f6;
}

body[data-theme="dark"] .exam-option-button {
  background-color: var(--bg-card, #1C1C1E);
  border-color: var(--border-color, #38383A);
}

body[data-theme="dark"] .exam-option-button:hover:not(:disabled) {
  border-color: #2196F3;
  background-color: var(--bg-secondary, #1a1a1a);
}

body[data-theme="dark"] .exam-option-button:disabled {
  background-color: var(--bg-primary, #000000);
  border-color: var(--border-color, #38383A);
  opacity: 0.6;
}

body[data-theme="dark"] .exam-option-count {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .exam-option-button:disabled .exam-option-count {
  color: var(--text-secondary, #98989E);
}

body[data-theme="dark"] .exam-option-disabled {
  color: var(--text-secondary, #98989E);
}

/* ========== ТЕМНАЯ ТЕМА ДЛЯ ЭКРАНОВ ТЕМ И РЕЗУЛЬТАТОВ ========== */
body[data-theme="dark"] .topic-item {
  background-color: var(--topic-item-bg, #3a3a3a);
  color: var(--topic-item-text, #ffffff);
  box-shadow: 0 2px 4px var(--topic-item-shadow, rgba(0, 0, 0, 0.3));
}

body[data-theme="dark"] .topic-item:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

body[data-theme="dark"] .topic-number,
body[data-theme="dark"] .topic-name,
body[data-theme="dark"] .topic-count {
  color: var(--topic-item-text, #ffffff);
  }

body[data-theme="dark"] .topic-total-questions {
  color: var(--text-secondary, #98989E);
}

body[data-theme="dark"] .topic-detail-container {
  background-color: var(--bg-primary, #000000);
}

body[data-theme="dark"] .topic-detail-title {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .results-section {
  background-color: var(--topic-item-bg, #3a3a3a);
}

body[data-theme="dark"] .result-id {
  color: var(--button-primary, #42a5f5);
  }

body[data-theme="dark"] .result-title {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .result-card {
  background-color: var(--bg-card, #1C1C1E);
  box-shadow: 0 2px 4px var(--card-shadow, rgba(0,0,0,0.3));
}

body[data-theme="dark"] .result-card-text {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .history-title {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .history-item {
  background-color: var(--bg-card, #1C1C1E);
  border-color: var(--border-color, #38383A);
}

body[data-theme="dark"] .full-review-result-info {
  background-color: var(--topic-item-bg, #3a3a3a);
}

body[data-theme="dark"] .review-question-block {
  background-color: var(--bg-card, #1C1C1E);
  box-shadow: 0 2px 8px var(--card-shadow, rgba(0,0,0,0.3));
}

body[data-theme="dark"] .review-question-text {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .review-answer {
  background-color: var(--bg-secondary, #333333);
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .review-answer-correct {
  background-color: rgba(40, 167, 69, 0.2);
  border-color: #28a745;
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .review-answer-incorrect {
  background-color: rgba(220, 53, 69, 0.2);
  border-color: #dc3545;
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .full-review-container {
  background-color: var(--bg-primary, #000000);
}

body[data-theme="dark"] .full-review-title {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .review-result-id {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .review-stat-label,
body[data-theme="dark"] .review-stat-value {
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .review-question-number {
  color: var(--text-secondary, #98989E);
}

body[data-theme="dark"] .history-id,
body[data-theme="dark"] .history-score,
body[data-theme="dark"] .history-time,
body[data-theme="dark"] .history-date {
  color: var(--text-main, #ffffff);
}

/* Dark mode styles for question box */
body[data-theme="dark"] .question-box {
  background-color: var(--bg-card, #1C1C1E);
  border: 1px solid var(--border-color, #38383A);
}

body[data-theme="dark"] .question-text-new {
  color: var(--text-main, #ffffff);
  font-size: 22px;
  font-weight: 600;
  text-align: center;
}

/* ========== АНИМАЦИИ ДЛЯ ИИ-ТРЕНЕРА ========== */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.loading-spinner-small {
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top: 3px solid #ffffff;
  width: 20px;
  height: 20px;
  animation: spin 1s linear infinite;
  flex-shrink: 0;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Стили для блока совета ИИ-тренера */
.ai-trainer-advice-block {
  animation: slideIn 0.5s ease-out;
}

body[data-theme="dark"] .ai-trainer-advice-block {
  background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%) !important;
}

/* ========== КНОПКА ПЕРЕКЛЮЧЕНИЯ ТЕМЫ ========== */
.theme-toggle-button {
  position: fixed !important;
  top: 16px !important;
  left: 16px !important;
  right: auto !important;
  bottom: auto !important;
  z-index: 10001 !important;
  width: 40px !important;
  height: 40px !important;
  border: none !important;
  background: transparent !important;
  color: var(--text-color, #1a1a1a) !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: opacity 0.2s ease, transform 0.2s ease !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
  border-radius: 50% !important;
  /* Закрепляем на заднем фоне, чтобы не двигалась при скролле */
  will-change: opacity, transform !important;
  transform: translateZ(0) !important; /* Аппаратное ускорение */
  /* Отключаем влияние родительских элементов */
  contain: layout style paint !important;
  /* Убеждаемся, что кнопка не зависит от родительских контейнеров */
  isolation: isolate !important;
}

.theme-icon-container {
  position: relative;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.theme-icon {
  position: absolute;
  top: 0;
  left: 0;
  width: 20px;
  height: 20px;
  transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
              visibility 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: none;
  will-change: opacity, transform;
}

/* Sun icon - visible in light mode */
.theme-icon-sun.visible {
  opacity: 1;
  transform: rotate(0deg) scale(1);
  visibility: visible;
}

.theme-icon-sun.hidden {
  opacity: 0;
  transform: rotate(90deg) scale(0.8);
  visibility: hidden;
}

/* Moon icon - visible in dark mode */
.theme-icon-moon.visible {
  opacity: 1;
  transform: rotate(0deg) scale(1);
  visibility: visible;
}

.theme-icon-moon.hidden {
  opacity: 0;
  transform: rotate(-90deg) scale(0.8);
  visibility: hidden;
}

.theme-toggle-button:hover {
  opacity: 0.7;
  background-color: rgba(0, 0, 0, 0.05);
}

.theme-toggle-button:hover .theme-icon-container {
  transform: scale(1.1);
}

.theme-toggle-button:active {
  opacity: 0.5;
  transform: scale(0.95);
}

.theme-toggle-button:active .theme-icon-container {
  transform: scale(0.9);
}

/* Темная тема для кнопки переключения */
body[data-theme="dark"] .theme-toggle-button {
  background: transparent;
  border: none;
  color: #ffffff;
  box-shadow: none;
}

body[data-theme="dark"] .theme-toggle-button:hover {
  opacity: 0.7;
  background-color: rgba(255, 255, 255, 0.1);
}

/* ========== СТИЛИ ДЛЯ БЕЙДЖА ПОДПИСКИ ========== */
.subscription-status-badge {
  position: fixed !important;
  top: 16px !important;
  right: 16px !important;
  left: auto !important;
  bottom: auto !important;
  z-index: 9999 !important;
  cursor: pointer !important;
  transition: opacity 0.2s ease, transform 0.2s ease !important;
  /* Закрепляем на заднем фоне, чтобы не двигалась при скролле */
  will-change: opacity, transform !important;
  transform: translateZ(0) !important; /* Аппаратное ускорение */
  /* Отключаем влияние родительских элементов */
  contain: layout style paint !important;
  /* Убеждаемся, что бейдж не зависит от родительских контейнеров */
  isolation: isolate !important;
}

.subscription-status-badge:hover {
  transform: scale(1.1);
}

.subscription-badge-active {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
  border: 2px solid rgba(255, 255, 255, 0.3);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.subscription-badge-inactive {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.2);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.subscription-badge-icon {
  color: #ffffff;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  stroke: currentColor;
  fill: none;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
}

/* Темная тема для бейджа */
body[data-theme="dark"] .subscription-badge-active {
  background: linear-gradient(135deg, #FFD700 0%, #FF8C00 100%);
  box-shadow: 0 2px 12px rgba(255, 215, 0, 0.5);
}

body[data-theme="dark"] .subscription-badge-inactive {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.3);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Светлая тема для бейджа без подписки */
.subscription-badge-inactive {
  background: rgba(0, 0, 0, 0.1);
  border-color: rgba(0, 0, 0, 0.2);
}

.subscription-badge-inactive .subscription-badge-icon {
  color: #666666;
}

body[data-theme="dark"] .subscription-badge-inactive .subscription-badge-icon {
  color: #ffffff;
}

/* ========== КНОПКА ПОДПИСКИ НА ЭКРАНЕ ЭКЗАМЕНА ========== */
.exam-subscription-button-wrapper {
  margin-bottom: 20px;
  padding: 0 28px;
}

.exam-subscription-button {
  width: 100%;
  padding: 14px 20px;
  background-color: var(--card-bg, #ffffff);
  border: 2px solid var(--border-color, #e0e0e0);
  border-radius: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: 16px;
  font-weight: 600;
  color: var(--text-color, #1a1a1a);
  transition: all 0.3s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.exam-subscription-button:hover {
  background-color: var(--bg-secondary, #f5f5f5);
  border-color: var(--button-primary, #2196F3);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.exam-subscription-icon {
  font-size: 20px;
  font-weight: 700;
}

.exam-subscription-text {
  font-weight: 600;
}

/* Темная тема для кнопки подписки */
body[data-theme="dark"] .exam-subscription-button {
  background-color: var(--bg-card, #1C1C1E);
  border-color: var(--border-color, #38383A);
  color: var(--text-main, #ffffff);
}

body[data-theme="dark"] .exam-subscription-button:hover {
  background-color: var(--bg-secondary, #1a1a1a);
  border-color: var(--button-primary, #42a5f5);
}

/* ========== СТИЛИ ДЛЯ МОДАЛЬНОГО ОКНА ПОДПИСКИ ========== */
.subscription-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100000;
  padding: 20px;
  animation: fadeIn 0.3s ease;
}

.subscription-modal-content {
  background-color: var(--bg-card, #ffffff);
  border-radius: 20px;
  width: 100%;
  max-width: 500px;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.3s ease;
}

.subscription-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-color, #e0e0e0);
}

.subscription-modal-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0;
}

.subscription-modal-close {
  background: none;
  border: none;
  font-size: 24px;
  color: var(--text-secondary, #666);
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: background-color 0.2s ease;
}

.subscription-modal-close:hover {
  background-color: var(--bg-secondary, #f5f5f5);
}

.subscription-modal-body {
  padding: 24px;
  max-height: calc(80vh - 100px);
  overflow-y: auto;
  overflow-x: hidden;
}

.subscription-modal-body::-webkit-scrollbar {
  width: 4px;
}

.subscription-modal-body::-webkit-scrollbar-track {
  background: transparent;
}

.subscription-modal-body::-webkit-scrollbar-thumb {
  background: var(--border-color, #38383A);
  border-radius: 2px;
}

.subscription-status-card {
  text-align: center;
  padding: 30px 20px;
  border-radius: 16px;
  margin-bottom: 20px;
}

.subscription-status-card.active {
  background-color: #e8f5e9;
  border: 2px solid #18ec23;
}

.subscription-status-card.inactive {
  background-color: #fff3e0;
  border: 2px solid #ff9800;
}

.subscription-status-icon-large {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  font-size: 40px;
  font-weight: 700;
}

.subscription-status-icon-large svg {
  width: 48px;
  height: 48px;
  stroke: currentColor;
  fill: none;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.subscription-status-card.active .subscription-status-icon-large {
  background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
  }

.subscription-status-card.inactive .subscription-status-icon-large {
  background-color: #ff9800;
  color: #ffffff;
}

.subscription-status-title {
  font-size: 22px;
  font-weight: 700;
  color: var(--text-color, #1a1a1a);
  margin: 0 0 20px 0;
}

.subscription-status-description {
  font-size: 15px;
  color: var(--text-secondary, #666);
  line-height: 1.6;
  margin: 0;
}

.subscription-details {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 20px;
}

.subscription-detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 10px;
}

.subscription-detail-label {
  font-size: 14px;
  color: var(--text-secondary, #666);
  font-weight: 500;
}

.subscription-detail-value {
  font-size: 15px;
  color: var(--text-color, #1a1a1a);
  font-weight: 600;
}

.subscription-detail-value.highlight {
  color: #18ec23;
  font-weight: 700;
}

.subscription-renew-button,
.subscription-purchase-button {
  width: 100%;
  padding: 16px;
  font-size: 16px;
  font-weight: 600;
  color: #ffffff;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: linear-gradient(135deg, #18ec23 0%, #15d31f 100%);
  box-shadow: 0 4px 12px rgba(24, 236, 35, 0.3);
}

.subscription-renew-button:hover,
.subscription-purchase-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(24, 236, 35, 0.4);
}

.subscription-renew-button:active,
.subscription-purchase-button:active {
  transform: translateY(0);
}

/* Темная тема для модального окна */
body[data-theme="dark"] .subscription-modal-content {
  background-color: var(--card-bg, #2d2d2d);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

body[data-theme="dark"] .subscription-modal-header {
  border-color: var(--border-color, #424242);
}

body[data-theme="dark"] .subscription-modal-title {
  color: var(--text-color, #ffffff);
}

body[data-theme="dark"] .subscription-modal-close {
  color: var(--text-secondary, #b0b0b0);
}

body[data-theme="dark"] .subscription-modal-close:hover {
  background-color: var(--bg-secondary, #333333);
}

body[data-theme="dark"] .subscription-status-card.active {
  background-color: rgba(40, 167, 69, 0.2);
  border-color: #28a745;
}

body[data-theme="dark"] .subscription-status-card.inactive {
  background-color: rgba(255, 152, 0, 0.2);
  border-color: #ff9800;
}

body[data-theme="dark"] .subscription-status-title {
  color: var(--text-color, #ffffff);
}

body[data-theme="dark"] .subscription-status-description {
  color: var(--text-secondary, #b0b0b0);
}

body[data-theme="dark"] .subscription-detail-item {
  background-color: rgba(255, 255, 255, 0.05);
}

body[data-theme="dark"] .subscription-detail-label {
  color: var(--text-secondary, #b0b0b0);
}

body[data-theme="dark"] .subscription-detail-value {
  color: var(--text-color, #ffffff);
}

/* ========== СТИЛИ ДЛЯ ИИ-ОБЪЯСНЕНИЯ ОШИБОК ========== */
.explanation-block {
  margin-top: 8px;
  margin-left: 12px;
  padding: 8px 0;
}

.explanation-button {
  background-color: var(--button-primary, #2196F3);
  color: var(--button-text, #ffffff);
  border: none;
  border-radius: 8px;
  padding: 8px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  font-weight: 500;
}

.explanation-button:hover {
  background-color: var(--button-primary-hover, #1976D2);
}

.explanation-button:active {
  transform: scale(0.98);
}

.explanation-loading {
  color: var(--text-secondary, #8E8E93);
  font-size: 14px;
  font-style: italic;
  padding: 8px 0;
}

.explanation-error {
  color: var(--error-color, #f44336);
  font-size: 14px;
  padding: 8px 0;
}

.explanation-text {
  background-color: var(--bg-card, #FFFFFF);
  border: 1px solid var(--border-color, #E5E5EA);
  border-radius: 8px;
  padding: 12px 16px;
  margin-top: 8px;
  color: var(--text-main, #000000);
  font-size: 14px;
  line-height: 1.5;
  box-shadow: 0 2px 4px var(--card-shadow, rgba(0, 0, 0, 0.1));
}

body[data-theme="dark"] .explanation-text {
  background-color: var(--bg-card, #1C1C1E);
  border-color: var(--border-color, #38383A);
  color: var(--text-main, #FFFFFF);
  box-shadow: 0 2px 4px var(--card-shadow, rgba(0, 0, 0, 0.3));
}

/* ========== LOADING SCREEN ========== */
.loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--bg-primary, #F2F2F7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

body[data-theme="dark"] .loading-screen {
  background-color: var(--bg-primary, #000000);
}

.loading-spinner-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 4px solid var(--border-color, #E5E5EA);
  border-top-color: var(--button-primary, #2196F3);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
}
  100% {
    transform: rotate(360deg);
  }
}

.loading-text {
  color: var(--text-color, #1a1a1a);
  font-size: 16px;
  font-weight: 500;
}

body[data-theme="dark"] .loading-text {
  color: var(--text-color, #ffffff);
}

/* ========== PAYMENT MODAL ========== */
.payment-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  padding: 20px;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ========== СТИЛИ ДЛЯ МОДАЛЬНОГО ОКНА ОПЛАТЫ ========== */

.payment-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  padding: 20px;
}

.payment-modal-content {
  background-color: var(--bg-card, #1C1C1E);
  border-radius: 16px;
  padding: 24px;
  max-width: 400px;
  width: 100%;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  /* Без анимации, чтобы избежать глюков при вводе текста */
}

body[data-theme="light"] .payment-modal-content {
  background-color: var(--bg-card, #ffffff);
}

.payment-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.payment-modal-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-color, #ffffff);
  margin: 0;
}

body[data-theme="light"] .payment-modal-title {
  color: var(--text-color, #1a1a1a);
}

.payment-modal-close {
  background: none;
  border: none;
  color: var(--text-secondary, #999);
  font-size: 24px;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: background-color 0.2s;
}

.payment-modal-close:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

body[data-theme="light"] .payment-modal-close:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.payment-modal-body {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.payment-modal-text {
  font-size: 16px;
  color: var(--text-color, #ffffff);
  margin: 0;
  line-height: 1.5;
}

body[data-theme="light"] .payment-modal-text {
  color: var(--text-color, #1a1a1a);
}

.payment-card-number-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.payment-card-number {
  background-color: var(--bg-secondary, #2C2C2E);
  border: 2px solid var(--border-color, #3A3A3C);
  border-radius: 12px;
  padding: 16px;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-color, #ffffff);
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  font-family: 'Courier New', monospace;
  letter-spacing: 2px;
  user-select: all;
}

body[data-theme="light"] .payment-card-number {
  background-color: var(--bg-secondary, #f5f5f5);
  border-color: var(--border-color, #e0e0e0);
  color: var(--text-color, #1a1a1a);
}

.payment-card-number:hover {
  background-color: var(--bg-secondary, #3A3A3C);
  border-color: var(--button-primary, #2196F3);
}

body[data-theme="light"] .payment-card-number:hover {
  background-color: #eeeeee;
  border-color: #2196F3;
}

.payment-copy-button {
  background-color: var(--button-primary, #2196F3);
  color: #ffffff;
  border: none;
  border-radius: 10px;
  padding: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}

.payment-copy-button:hover {
  background-color: #1976D2;
}

.payment-input-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.payment-input-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-color, #ffffff);
}

body[data-theme="light"] .payment-input-label {
  color: var(--text-color, #1a1a1a);
}

.payment-input {
  padding: 12px;
  font-size: 16px;
  border: 2px solid var(--border-color, #3A3A3C);
  border-radius: 10px;
  background-color: var(--bg-secondary, #2C2C2E);
  color: var(--text-color, #ffffff);
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s;
}

body[data-theme="light"] .payment-input {
  background-color: var(--bg-secondary, #f5f5f5);
  border-color: var(--border-color, #e0e0e0);
  color: var(--text-color, #1a1a1a);
}

.payment-input:focus {
  outline: none;
  border-color: var(--button-primary, #2196F3);
}

.payment-modal-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 8px;
}

.payment-confirm-button {
  background-color: var(--button-primary, #2196F3);
  color: #ffffff;
  border: none;
  border-radius: 10px;
  padding: 14px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}

.payment-confirm-button:hover:not(:disabled) {
  background-color: #1976D2;
}

.payment-confirm-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.payment-cancel-button {
  background-color: transparent;
  color: var(--text-secondary, #999);
  border: 2px solid var(--border-color, #3A3A3C);
  border-radius: 10px;
  padding: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

body[data-theme="light"] .payment-cancel-button {
  color: var(--text-secondary, #666);
  border-color: var(--border-color, #e0e0e0);
}

.payment-cancel-button:hover {
  background-color: var(--bg-secondary, #2C2C2E);
  border-color: var(--text-secondary, #999);
}

body[data-theme="light"] .payment-cancel-button:hover {
  background-color: var(--bg-secondary, #f5f5f5);
}

.payment-modal-content {
  background-color: var(--bg-card, #1C1C1E);
  border-radius: 16px;
  padding: 24px;
  max-width: 400px;
  width: 100%;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  /* Убрана анимация, чтобы избежать глюков при вводе текста */
}

body[data-theme="light"] .payment-modal-content {
  background-color: var(--bg-card, #ffffff);
}

.payment-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.payment-modal-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-color, #ffffff);
  margin: 0;
}

body[data-theme="light"] .payment-modal-title {
  color: var(--text-color, #1a1a1a);
}

.payment-modal-close {
  background: none;
  border: none;
  font-size: 24px;
  color: var(--text-secondary, #98989E);
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: background-color 0.2s;
}

.payment-modal-close:hover {
  background-color: var(--bg-secondary, #2C2C2E);
}

body[data-theme="light"] .payment-modal-close:hover {
  background-color: var(--bg-secondary, #f5f5f5);
}

.payment-modal-body {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.payment-modal-text {
  color: var(--text-color, #ffffff);
  font-size: 16px;
  margin: 0;
  line-height: 1.5;
}

body[data-theme="light"] .payment-modal-text {
  color: var(--text-color, #1a1a1a);
}

.payment-card-number-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.payment-card-number {
  background-color: var(--bg-secondary, #2C2C2E);
  border: 2px solid var(--border-color, #38383A);
  border-radius: 12px;
  padding: 16px;
  font-size: 20px;
  font-weight: 700;
  color: var(--text-color, #ffffff);
  text-align: center;
  letter-spacing: 2px;
  cursor: pointer;
  transition: all 0.2s;
  user-select: all;
}

body[data-theme="light"] .payment-card-number {
  background-color: var(--bg-secondary, #f5f5f5);
  border-color: var(--border-color, #E5E5EA);
  color: var(--text-color, #1a1a1a);
}

.payment-card-number:hover {
  border-color: var(--button-primary, #2196F3);
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.payment-copy-button {
  background-color: var(--button-primary, #2196F3);
  color: var(--button-text, #ffffff);
  border: none;
  border-radius: 8px;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  transform: scale(1);
}

.payment-copy-button:hover {
  background-color: var(--button-primary-hover, #1976D2);
  transform: scale(1.05);
}

.payment-copy-button:active {
  transform: scale(0.95);
}

.payment-copy-button:hover {
  background-color: var(--button-primary-hover, #1976D2);
}

.payment-input-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.payment-input-label {
  color: var(--text-color, #ffffff);
  font-size: 14px;
  font-weight: 500;
}

body[data-theme="light"] .payment-input-label {
  color: var(--text-color, #1a1a1a);
}

.payment-input {
  background-color: var(--input-bg, #2C2C2E);
  border: 1px solid var(--input-border, #38383A);
  border-radius: 8px;
  padding: 12px 16px;
  font-size: 16px;
  color: var(--text-color, #ffffff);
  outline: none;
  transition: border-color 0.2s;
}

body[data-theme="light"] .payment-input {
  background-color: var(--input-bg, #FFFFFF);
  border-color: var(--input-border, #E5E5EA);
  color: var(--text-color, #1a1a1a);
}

.payment-input:focus {
  border-color: var(--button-primary, #2196F3);
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
  transform: scale(1.01);
}

.payment-input::placeholder {
  color: var(--text-hint, #888888);
}

.payment-modal-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.payment-confirm-button {
  background-color: var(--button-primary, #2196F3);
  color: var(--button-text, #ffffff);
  border: none;
  border-radius: 8px;
  padding: 14px 24px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  transform: scale(1);
}

.payment-confirm-button:hover:not(:disabled) {
  background-color: var(--button-primary-hover, #1976D2);
  transform: scale(1.02);
}

.payment-confirm-button:active:not(:disabled) {
  transform: scale(0.98);
}

.payment-confirm-button:hover:not(:disabled) {
  background-color: var(--button-primary-hover, #1976D2);
}

.payment-confirm-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.payment-cancel-button {
  background-color: transparent;
  color: var(--text-secondary, #98989E);
  border: 1px solid var(--border-color, #38383A);
  border-radius: 8px;
  padding: 14px 24px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  transform: scale(1);
}

.payment-cancel-button:hover {
  background-color: var(--bg-secondary, #2C2C2E);
  border-color: var(--text-secondary, #98989E);
  transform: scale(1.02);
}

.payment-cancel-button:active {
  transform: scale(0.98);
}

.payment-cancel-button:hover {
  background-color: var(--bg-secondary, #2C2C2E);
  border-color: var(--text-secondary, #98989E);
}

body[data-theme="light"] .payment-cancel-button {
  border-color: var(--border-color, #E5E5EA);
}

body[data-theme="light"] .payment-cancel-button:hover {
  background-color: var(--bg-secondary, #f5f5f5);
}

/* ========== TARIFF SELECTION (IMPROVED) ========== */
.tariff-selection-container {
  margin-top: 24px;
}

.tariff-selection-title {
  font-size: 24px;
  font-weight: 800;
  color: var(--text-color, #ffffff);
  text-align: center;
  margin-bottom: 28px;
  letter-spacing: -0.5px;
}

body[data-theme="light"] .tariff-selection-title {
  color: var(--text-color, #1a1a1a);
}

.tariff-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 20px;
  max-width: 100%;
}

@media (min-width: 768px) {
  .tariff-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }
}

/* ========== TARIFF SELECTION (COMPACT & MODERN) ========== */
.tariff-selection-container-compact {
  margin-top: 0;
  padding: 0;
  max-height: calc(80vh - 120px);
  overflow: hidden;
}

.tariff-carousel {
  display: flex;
  overflow-x: auto;
  overflow-y: hidden;
  gap: 16px;
  padding: 8px 4px 16px 4px;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  width: 100%;
}

@media (min-width: 768px) {
  .tariff-carousel {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    overflow-x: visible;
    overflow-y: visible;
    padding: 8px 0 16px 0;
    scroll-snap-type: none;
  }
}

.tariff-carousel::-webkit-scrollbar {
  display: none;
}

.tariff-card-compact {
  background: var(--bg-card, #1C1C1E);
  border: 2px solid var(--border-color, #38383A);
  border-radius: 16px;
  padding: 20px;
  position: relative;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-width: 85%;
  max-width: 85%;
  scroll-snap-align: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  flex-shrink: 0;
}

@media (min-width: 768px) {
  .tariff-card-compact {
    min-width: 0;
    max-width: 100%;
    width: 100%;
  }
}

body[data-theme="light"] .tariff-card-compact {
  background: var(--bg-card, #ffffff);
  border-color: var(--border-color, #E5E5EA);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.tariff-card-compact:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  border-color: var(--button-primary, #2196F3);
}

body[data-theme="light"] .tariff-card-compact:hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  border-color: var(--button-primary, #2196F3);
}

.tariff-card-pro {
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(249, 115, 22, 0.4) 100%);
  border: 2px solid rgba(251, 191, 36, 0.5);
  box-shadow: 0 0 25px rgba(251, 191, 36, 0.4), 0 8px 20px rgba(0, 0, 0, 0.3);
  position: relative;
}

body[data-theme="light"] .tariff-card-pro {
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.25) 0%, rgba(249, 115, 22, 0.35) 100%);
  box-shadow: 0 0 25px rgba(251, 191, 36, 0.3), 0 8px 20px rgba(0, 0, 0, 0.15);
}

.tariff-card-pro:hover {
  box-shadow: 0 0 35px rgba(251, 191, 36, 0.6), 0 12px 30px rgba(0, 0, 0, 0.4);
  transform: translateY(-6px) scale(1.03);
  border-color: rgba(251, 191, 36, 0.8);
}

.tariff-badge-compact {
  position: absolute;
  top: 12px;
  right: 12px;
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  color: #000;
  font-size: 10px;
  font-weight: 800;
  padding: 4px 10px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(251, 191, 36, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  z-index: 10;
}

.tariff-name-compact {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-secondary, #98989E);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  margin-bottom: 8px;
}

body[data-theme="light"] .tariff-name-compact {
  color: var(--text-secondary, #8E8E93);
}

.tariff-price-compact {
  font-size: 48px;
  font-weight: 900;
  color: var(--text-color, #ffffff);
  line-height: 1;
  margin: 8px 0 4px 0;
  letter-spacing: -2px;
}

body[data-theme="light"] .tariff-price-compact {
  color: var(--text-color, #1a1a1a);
}

.tariff-card-pro .tariff-price-compact {
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.tariff-currency {
  font-size: 14px;
  color: var(--text-secondary, #98989E);
  font-weight: 600;
  margin-bottom: 8px;
}

.tariff-duration-compact {
  font-size: 13px;
  color: var(--text-secondary, #98989E);
  margin-bottom: 16px;
  font-weight: 500;
}

.tariff-features-compact {
  list-style: none;
  padding: 0;
  margin: 0 0 16px 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
}

.tariff-feature-compact {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-color, #ffffff);
  line-height: 1.4;
}

body[data-theme="light"] .tariff-feature-compact {
  color: var(--text-color, #1a1a1a);
}

.tariff-feature-icon-compact {
  color: var(--success-color, #18ec23);
  font-weight: 900;
  font-size: 14px;
  min-width: 16px;
  flex-shrink: 0;
}

.tariff-button-compact {
  width: 100%;
  background: linear-gradient(135deg, var(--button-primary, #2196F3) 0%, var(--button-primary-hover, #1976D2) 100%);
  color: var(--button-text, #ffffff);
  border: none;
  border-radius: 10px;
  padding: 14px 20px;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  margin-top: auto;
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.tariff-button-compact:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
}

.tariff-button-compact:active {
  transform: translateY(0);
}

.tariff-button-pro {
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  color: #000;
  box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
  font-weight: 800;
}

.tariff-button-pro:hover {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  box-shadow: 0 6px 20px rgba(251, 191, 36, 0.5);
  transform: translateY(-3px);
}

/* Кнопка "Назад" в секции тарифов */
.tariff-back-button {
  background-color: transparent;
  color: var(--text-secondary, #98989E);
  border: 1px solid var(--border-color, #38383A);
  border-radius: 8px;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 20px;
  width: 100%;
}

.tariff-back-button:hover {
  background-color: var(--bg-secondary, #2C2C2E);
  border-color: var(--text-secondary, #98989E);
  color: var(--text-color, #ffffff);
}

body[data-theme="light"] .tariff-back-button {
  border-color: var(--border-color, #E5E5EA);
}

body[data-theme="light"] .tariff-back-button:hover {
  background-color: var(--bg-secondary, #f5f5f5);
  color: var(--text-color, #1a1a1a);
}

/* ========== ИИ-ОБЪЯСНЕНИЕ: Стили для эффекта печатания ========== */
/* Стили уже определены выше, дублируем только для совместимости */

.ai-explanation-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  font-weight: 600;
  color: var(--text-color, #ffffff);
  font-size: 15px;
}

body[data-theme="light"] .ai-explanation-header {
  color: var(--text-color, #1a1a1a);
}

.ai-explanation-icon {
  font-size: 18px;
}

.ai-explanation-title {
  font-size: 15px;
}

.ai-explanation-content {
  color: var(--text-color, #ffffff);
  line-height: 1.6;
  font-size: 14px;
}

body[data-theme="light"] .ai-explanation-content {
  color: var(--text-color, #1a1a1a);
}

.ai-explanation-text {
  display: inline-block;
  color: var(--text-color, #ffffff);
  line-height: 1.6;
  font-size: 14px;
}

body[data-theme="light"] .ai-explanation-text {
  color: var(--text-color, #1a1a1a);
}

.typewriter-cursor {
  display: inline-block;
  margin-left: 2px;
  color: var(--text-color, #ffffff);
  animation: blink 1s infinite;
  font-weight: 300;
}

body[data-theme="light"] .typewriter-cursor {
  color: var(--text-color, #1a1a1a);
}

@keyframes blink {
  0%, 50% {
    opacity: 1;
  }
  51%, 100% {
    opacity: 0;
  }
}

.ai-explanation-loading {
  color: var(--text-secondary, #98989E);
  font-style: italic;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ai-explanation-loading::before {
  content: '⏳';
  font-size: 16px;
}

.ai-explanation-error {
  color: var(--error-color, #f44336);
  font-size: 14px;
  padding: 8px;
  background-color: rgba(244, 67, 54, 0.1);
  border-radius: 8px;
  border-left: 3px solid var(--error-color, #f44336);
}

body[data-theme="light"] .ai-explanation-error {
  background-color: rgba(244, 67, 54, 0.05);
}

/* ========== ЭКРАН СТАТИСТИКИ ========== */
.analytics-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  min-height: 100vh;
  background: var(--bg-primary, #F2F2F7);
  animation: fadeInContent 0.3s ease;
}

body[data-theme="dark"] .analytics-container {
  background: var(--bg-primary, #000000);
}

.analytics-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}

.analytics-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0;
  flex: 1;
}

body[data-theme="dark"] .analytics-title {
  color: var(--text-main, #FFFFFF);
}

.analytics-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  gap: 16px;
}

.analytics-loading p {
  color: var(--text-secondary, #8E8E93);
  font-size: 16px;
}

.analytics-content {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* AI-Вердикт */
.analytics-ai-verdict {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16px;
  padding: 20px;
  color: #ffffff;
  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
  animation: slideIn 0.4s ease;
}

.analytics-ai-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.analytics-ai-icon {
  font-size: 24px;
}

.analytics-ai-header h3 {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
}

.analytics-ai-content {
  font-size: 16px;
  line-height: 1.6;
}

.analytics-ai-content p {
  margin: 0;
}

.analytics-ai-button {
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.3);
  color: #ffffff;
  border-radius: 12px;
  padding: 12px 20px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
}

.analytics-ai-button:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

.analytics-ai-loading {
  display: flex;
  align-items: center;
  gap: 8px;
  font-style: italic;
}

.analytics-ai-error {
  color: #ffebee;
  background: rgba(255, 255, 255, 0.1);
  padding: 12px;
  border-radius: 8px;
  border-left: 3px solid #ffebee;
}

/* Слабые места */
.analytics-weak-topics {
  background: var(--card-bg, #ffffff);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 2px 12px var(--card-shadow, rgba(0, 0, 0, 0.1));
}

body[data-theme="dark"] .analytics-weak-topics {
  background: var(--card-bg, #1C1C1E);
}

.analytics-section-title {
  font-size: 22px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0 0 8px 0;
}

body[data-theme="dark"] .analytics-section-title {
  color: var(--text-main, #FFFFFF);
}

.analytics-section-subtitle {
  font-size: 14px;
  color: var(--text-secondary, #8E8E93);
  margin: 0 0 16px 0;
}

.analytics-weak-topics-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.analytics-weak-topic-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--bg-secondary, #f5f5f5);
  border-radius: 12px;
  padding: 16px;
  border-left: 4px solid var(--error-color, #f44336);
  transition: all 0.2s ease;
}

body[data-theme="dark"] .analytics-weak-topic-item {
  background: var(--bg-secondary, #1a1a1a);
}

.analytics-weak-topic-item:hover {
  transform: translateX(4px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.analytics-weak-topic-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.analytics-weak-topic-rank {
  font-size: 20px;
  font-weight: 700;
  color: var(--error-color, #f44336);
  min-width: 32px;
  text-align: center;
}

.analytics-weak-topic-details {
  flex: 1;
}

.analytics-weak-topic-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-main, #1a1a1a);
  margin: 0 0 6px 0;
}

body[data-theme="dark"] .analytics-weak-topic-name {
  color: var(--text-main, #FFFFFF);
}

.analytics-weak-topic-stats {
  display: flex;
  gap: 16px;
  font-size: 14px;
  color: var(--text-secondary, #8E8E93);
}

.analytics-weak-topic-button {
  background: var(--error-color, #f44336);
  color: #ffffff;
  border: none;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.analytics-weak-topic-button:hover {
  background: var(--error-hover, #d32f2f);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
}

.analytics-weak-topic-button:active {
  transform: translateY(0);
}

/* Прогресс по темам */
.analytics-topics {
  background: var(--card-bg, #ffffff);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 2px 12px var(--card-shadow, rgba(0, 0, 0, 0.1));
}

body[data-theme="dark"] .analytics-topics {
  background: var(--card-bg, #1C1C1E);
}

.analytics-topics-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.analytics-topic-item {
  background: var(--bg-secondary, #f5f5f5);
  border-radius: 12px;
  padding: 16px;
  transition: all 0.2s ease;
}

body[data-theme="dark"] .analytics-topic-item {
  background: var(--bg-secondary, #1a1a1a);
}

.analytics-topic-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.analytics-topic-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.analytics-topic-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-main, #1a1a1a);
  margin: 0;
}

body[data-theme="dark"] .analytics-topic-name {
  color: var(--text-main, #FFFFFF);
}

.analytics-topic-percentage {
  font-size: 18px;
  font-weight: 700;
  padding: 4px 12px;
  border-radius: 8px;
}

.analytics-topic-percentage-red {
  color: #f44336;
  background: rgba(244, 67, 54, 0.1);
}

.analytics-topic-percentage-yellow {
  color: #ff9800;
  background: rgba(255, 152, 0, 0.1);
}

.analytics-topic-percentage-green {
  color: #4caf50;
  background: rgba(76, 175, 80, 0.1);
}

.analytics-topic-progress {
  width: 100%;
  height: 8px;
  background: var(--bg-secondary, #f5f5f5);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 12px;
}

body[data-theme="dark"] .analytics-topic-progress {
  background: var(--bg-secondary, #1a1a1a);
}

.analytics-topic-progress-bar {
  height: 100%;
  border-radius: 4px;
  transition: width 0.5s ease;
}

.analytics-topic-progress-red {
  background: linear-gradient(90deg, #f44336, #e91e63);
}

.analytics-topic-progress-yellow {
  background: linear-gradient(90deg, #ff9800, #ffc107);
}

.analytics-topic-progress-green {
  background: linear-gradient(90deg, #4caf50, #8bc34a);
}

.analytics-topic-stats {
  display: flex;
  gap: 16px;
  font-size: 14px;
  color: var(--text-secondary, #8E8E93);
}

.analytics-topic-stat {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Пустое состояние */
.analytics-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.analytics-empty-icon {
  font-size: 64px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.analytics-empty h3 {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0 0 8px 0;
}

body[data-theme="dark"] .analytics-empty h3 {
  color: var(--text-main, #FFFFFF);
}

.analytics-empty p {
  font-size: 16px;
  color: var(--text-secondary, #8E8E93);
  margin: 0 0 24px 0;
}

.analytics-empty-button {
  background: var(--button-primary, #2196F3);
  color: var(--button-text, #ffffff);
  border: none;
  border-radius: 12px;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.analytics-empty-button:hover {
  background: var(--button-primary-hover, #1976D2);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.analytics-empty-button:active {
  transform: translateY(0);
}

/* ========== ЭКРАН СТАТИСТИКИ (НОВЫЙ) ========== */
.statistics-container {
  width: 100%;
  max-width: 100%;
  margin: 0;
  padding: 20px;
  min-height: 100vh;
  height: 100vh;
  background: var(--bg-primary, #F2F2F7);
  animation: fadeInContent 0.3s ease;
  box-sizing: border-box;
  overflow-y: auto;
}

body[data-theme="dark"] .statistics-container {
  background: var(--bg-primary, #000000);
}

.statistics-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}

.statistics-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0;
  flex: 1;
}

body[data-theme="dark"] .statistics-title {
  color: var(--text-main, #FFFFFF);
}

.statistics-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  gap: 16px;
}

.statistics-loading p {
  color: var(--text-secondary, #8E8E93);
  font-size: 16px;
}

.statistics-error {
  background: var(--card-bg, #ffffff);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  color: var(--error-color, #f44336);
  box-shadow: 0 2px 12px var(--card-shadow, rgba(0, 0, 0, 0.1));
}

body[data-theme="dark"] .statistics-error {
  background: var(--card-bg, #1C1C1E);
}

.statistics-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.statistics-empty-icon {
  font-size: 64px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.statistics-empty h3 {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0 0 8px 0;
}

body[data-theme="dark"] .statistics-empty h3 {
  color: var(--text-main, #FFFFFF);
}

.statistics-empty p {
  font-size: 16px;
  color: var(--text-secondary, #8E8E93);
  margin: 0;
}

.statistics-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.statistics-cards {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.statistics-card {
  background: var(--card-bg, #ffffff);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 2px 12px var(--card-shadow, rgba(0, 0, 0, 0.1));
  transition: all 0.2s ease;
}

body[data-theme="dark"] .statistics-card {
  background: var(--card-bg, #1C1C1E);
}

.statistics-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 20px var(--card-shadow, rgba(0, 0, 0, 0.15));
}

.statistics-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.statistics-card-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-main, #1a1a1a);
  margin: 0;
  flex: 1;
}

body[data-theme="dark"] .statistics-card-title {
  color: var(--text-main, #FFFFFF);
}

.statistics-card-percentage {
  font-size: 20px;
  font-weight: 700;
  padding: 6px 14px;
  border-radius: 10px;
  margin-left: 12px;
}

.statistics-card-percentage-red {
  color: #f44336;
  background: rgba(244, 67, 54, 0.1);
}

.statistics-card-percentage-yellow {
  color: #ff9800;
  background: rgba(255, 152, 0, 0.1);
}

.statistics-card-percentage-green {
  color: #4caf50;
  background: rgba(76, 175, 80, 0.1);
}

.statistics-card-progress {
  width: 100%;
  height: 10px;
  background: var(--bg-secondary, #f5f5f5);
  border-radius: 5px;
  overflow: hidden;
  margin-bottom: 16px;
}

body[data-theme="dark"] .statistics-card-progress {
  background: var(--bg-secondary, #1a1a1a);
}

.statistics-card-progress-bar {
  height: 100%;
  border-radius: 5px;
  transition: width 0.5s ease;
}

.statistics-card-progress-red {
  background: linear-gradient(90deg, #f44336, #e91e63);
}

.statistics-card-progress-yellow {
  background: linear-gradient(90deg, #ff9800, #ffc107);
}

.statistics-card-progress-green {
  background: linear-gradient(90deg, #4caf50, #8bc34a);
}

.statistics-card-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  font-size: 14px;
}

.statistics-card-stat {
  display: flex;
  align-items: center;
  gap: 6px;
}

.statistics-card-stat-label {
  color: var(--text-secondary, #8E8E93);
}

.statistics-card-stat-value {
  color: var(--text-main, #1a1a1a);
  font-weight: 600;
}

body[data-theme="dark"] .statistics-card-stat-value {
  color: var(--text-main, #FFFFFF);
}

.statistics-section {
  margin-top: 24px;
}

.statistics-section-title {
  font-size: 22px;
  font-weight: 700;
  color: var(--text-main, #1a1a1a);
  margin: 0 0 16px 0;
}

body[data-theme="dark"] .statistics-section-title {
  color: var(--text-main, #FFFFFF);
}

/* ========== СТИЛИ ДЛЯ МОДАЛЬНОГО ОКНА ПОЗДРАВЛЕНИЯ ========== */
.welcome-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100001;
  animation: fadeIn 0.3s ease;
}

.welcome-modal-content {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 24px;
  width: 90%;
  max-width: 450px;
  padding: 32px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
  animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: hidden;
}

.welcome-modal-content::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
  animation: rotate 20s linear infinite;
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.welcome-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  position: relative;
  z-index: 1;
}

.welcome-modal-title {
  font-size: 32px;
  font-weight: 800;
  color: #ffffff;
  margin: 0;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.welcome-modal-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  color: #ffffff;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  position: relative;
  z-index: 1;
}

.welcome-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.welcome-modal-body {
  text-align: center;
  position: relative;
  z-index: 1;
}

.welcome-icon {
  font-size: 80px;
  margin-bottom: 16px;
  animation: bounce 1s ease infinite;
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.welcome-subtitle {
  font-size: 24px;
  font-weight: 700;
  color: #ffffff;
  margin: 0 0 16px 0;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.welcome-description {
  font-size: 16px;
  color: rgba(255, 255, 255, 0.95);
  margin: 0 0 12px 0;
  line-height: 1.6;
}

.welcome-description strong {
  color: #FFD700;
  font-weight: 700;
  font-size: 18px;
}

.welcome-button {
  margin-top: 24px;
  padding: 16px 32px;
  background: #ffffff;
  color: #667eea;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  width: 100%;
  max-width: 300px;
}

.welcome-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  background: #f8f9fa;
}

.welcome-button:active {
  transform: translateY(0);
}

body[data-theme="dark"] .welcome-modal-content {
  background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
}

body[data-theme="dark"] .welcome-button {
  background: #ffffff;
  color: #4a5568;
}

body[data-theme="dark"] .welcome-button:hover {
  background: #f8f9fa;
}

/* ========== МОБИЛЬНАЯ АДАПТАЦИЯ ДЛЯ СТАТИСТИКИ ========== */
@media (max-width: 768px) {
  /* Контейнер статистики */
  .analytics-container {
    padding: 12px;
    max-width: 100%;
  }

  .analytics-title {
    font-size: 22px;
  }

  .analytics-content {
    gap: 16px;
  }

  /* Слабые места - мобильная версия */
  .analytics-weak-topics {
    padding: 16px;
  }

  .analytics-section-title {
    font-size: 18px;
  }

  .analytics-section-subtitle {
    font-size: 12px;
  }

  .analytics-weak-topic-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
    padding: 12px;
  }

  .analytics-weak-topic-info {
    width: 100%;
    gap: 8px;
  }

  .analytics-weak-topic-rank {
    font-size: 18px;
    min-width: 28px;
  }

  .analytics-weak-topic-name {
    font-size: 14px;
  }

  .analytics-weak-topic-stats {
    flex-wrap: wrap;
    gap: 8px;
    font-size: 12px;
  }

  .analytics-weak-topic-button {
    width: 100%;
    padding: 10px 16px;
    font-size: 14px;
  }

  /* Прогресс по темам - мобильная версия */
  .analytics-topics {
    padding: 16px;
  }

  .analytics-topics-list {
    gap: 12px;
  }

  .analytics-topic-item {
    padding: 12px;
  }

  .analytics-topic-header {
    flex-wrap: wrap;
    gap: 8px;
  }

  .analytics-topic-name {
    font-size: 14px;
    flex: 1;
    min-width: 0;
    word-wrap: break-word;
  }

  .analytics-topic-percentage {
    font-size: 16px;
    padding: 4px 10px;
  }

  .analytics-topic-stats {
    flex-wrap: wrap;
    gap: 8px;
    font-size: 12px;
  }

  /* AI-вердикт - мобильная версия */
  .analytics-ai-verdict {
    padding: 16px;
  }

  .analytics-ai-header h3 {
    font-size: 18px;
  }

  .analytics-ai-content {
    font-size: 14px;
  }

  .analytics-ai-button {
    padding: 10px 16px;
    font-size: 14px;
  }
}

@media (max-width: 480px) {
  /* Еще более компактная версия для маленьких экранов */
  .analytics-container {
    padding: 8px;
  }

  .analytics-title {
    font-size: 20px;
  }

  .analytics-weak-topics,
  .analytics-topics {
    padding: 12px;
    border-radius: 12px;
  }

  .analytics-section-title {
    font-size: 16px;
  }

  .analytics-weak-topic-item {
    padding: 10px;
  }

  .analytics-weak-topic-name {
    font-size: 13px;
  }

  .analytics-weak-topic-stats {
    font-size: 11px;
  }

  .analytics-topic-item {
    padding: 10px;
  }

  .analytics-topic-name {
    font-size: 13px;
  }

  .analytics-topic-percentage {
    font-size: 14px;
    padding: 3px 8px;
  }

  .analytics-topic-stats {
    font-size: 11px;
    gap: 6px;
  }

  .analytics-ai-verdict {
    padding: 12px;
  }

  .analytics-ai-header h3 {
    font-size: 16px;
  }

  .analytics-ai-content {
    font-size: 13px;
  }
}
