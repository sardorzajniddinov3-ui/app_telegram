# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 400 Bad Request –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ Supabase Storage –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ `400 Bad Request` –∏–ª–∏ `404 Object not found`.

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏:**
```
Request URL: https://psjtbcotmnfvgulziara.supabase.co/storage/v1/object/public/question-images/questions/1770174065522-4pwrto.webp
Status Code: 400 Bad Request –∏–ª–∏ 404 Object not found
Content-Type: application/json; charset=utf-8
```

**‚úÖ –†–µ—à–µ–Ω–∏–µ –≤ –∫–æ–¥–µ:**
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
- –ü—Ä–∏ –æ—à–∏–±–∫–µ 404 –∏–ª–∏ –¥—Ä—É–≥–æ–π –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ `‚ö†Ô∏è [IMAGE] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç —Å–ª–æ–º–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ bucket `question-images` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –ø—É–±–ª–∏—á–Ω—ã–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **psjtbcotmnfvgulziara**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Storage** ‚Üí **Buckets**
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ bucket `question-images` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ bucket **–ø—É–±–ª–∏—á–Ω—ã–π** (Public bucket: ‚úÖ)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è bucket

1. –í —Ä–∞–∑–¥–µ–ª–µ **Storage** ‚Üí **Policies** –¥–ª—è bucket `question-images`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è **–ø—É–±–ª–∏—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è**:

```sql
-- –ù–∞–∑–≤–∞–Ω–∏–µ: Public read access
-- –û–ø–µ—Ä–∞—Ü–∏—è: SELECT
-- –ü–æ–ª–∏—Ç–∏–∫–∞:
true
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Storage

1. –í —Ä–∞–∑–¥–µ–ª–µ **Storage** ‚Üí **question-images** ‚Üí **questions/**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `1770174065522-4pwrto.webp` (–∏–ª–∏ –¥—Ä—É–≥–æ–π) —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ:
   - –§–∞–π–ª –±—ã–ª —É–¥–∞–ª–µ–Ω
   - –§–∞–π–ª –Ω–µ –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω
   - –ü—É—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–≤–µ—Ä–Ω—ã–π

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø—É—Ç–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ `image_url` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

**–í–∞—Ä–∏–∞–Ω—Ç 1:** –ü–æ–ª–Ω—ã–π URL (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
```
https://psjtbcotmnfvgulziara.supabase.co/storage/v1/object/public/question-images/questions/123.webp
```

**–í–∞—Ä–∏–∞–Ω—Ç 2:** –ü—É—Ç—å —Å bucket name (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
```
question-images/questions/123.webp
```

**–í–∞—Ä–∏–∞–Ω—Ç 3:** –ü—É—Ç—å –±–µ–∑ bucket name (–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–∏—Ç)
```
questions/123.webp
```

**–í–∞—Ä–∏–∞–Ω—Ç 4:** Base64 (–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
```
data:image/png;base64,iVBORw0KGgo...
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

- ‚úÖ `‚úÖ [IMAGE] URL —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω:` - URL —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ
- ‚ö†Ô∏è `‚ö†Ô∏è [IMAGE] getPublicUrl –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π URL` - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º URL
- ‚ùå `‚ùå [IMAGE] –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ URL` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ URL

### 6. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

–ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Storage, –Ω–æ –µ—Å—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

1. **–í–∞—Ä–∏–∞–Ω—Ç 1:** –£–¥–∞–ª–∏—Ç–µ –∑–∞–ø–∏—Å—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ)
2. **–í–∞—Ä–∏–∞–Ω—Ç 2:** –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é –≤ Storage
3. **–í–∞—Ä–∏–∞–Ω—Ç 3:** –û–±–Ω–æ–≤–∏—Ç–µ –ø—É—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª

### 7. –ï—Å–ª–∏ bucket –Ω–µ –ø—É–±–ª–∏—á–Ω—ã–π

–ï—Å–ª–∏ bucket –Ω–µ –ø—É–±–ª–∏—á–Ω—ã–π:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Storage** ‚Üí **Buckets** ‚Üí **question-images**
2. –ù–∞–∂–º–∏—Ç–µ **Edit bucket**
3. –í–∫–ª—é—á–∏—Ç–µ **Public bucket**: ‚úÖ
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 8. –ï—Å–ª–∏ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

–ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Storage** ‚Üí **Policies** –¥–ª—è bucket `question-images`
2. –ù–∞–∂–º–∏—Ç–µ **New Policy**
3. –í—ã–±–µ—Ä–∏—Ç–µ **For full customization**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Policy name:** `Public read access`
   - **Allowed operation:** `SELECT`
   - **Policy definition:** `true`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ SQL Editor

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –≤ Supabase SQL Editor:

```sql
-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø—É—Ç–µ–π –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
SELECT 
  id,
  question_text,
  image_url,
  CASE 
    WHEN image_url LIKE 'data:image/%' THEN 'Base64'
    WHEN image_url LIKE 'https://%' THEN 'Full URL'
    WHEN image_url LIKE 'question-images/%' THEN 'Path with bucket'
    WHEN image_url LIKE 'questions/%' THEN 'Path without bucket'
    ELSE 'Unknown format'
  END as image_format
FROM questions
WHERE image_url IS NOT NULL
LIMIT 10;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Storage API

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:

1. –û—Ç–∫—Ä–æ–π—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://psjtbcotmnfvgulziara.supabase.co/storage/v1/object/public/question-images/questions/1770174065522-4pwrto.webp
   ```

2. –ï—Å–ª–∏ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω - –≤—ã —É–≤–∏–¥–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
3. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –≤—ã —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É JSON

## ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º:

1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ 400/404
3. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (404), –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –§—É–Ω–∫—Ü–∏—è `resolveImage` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø—É—Ç–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ–º–æ–∂–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ü—Ä–∏ –æ—à–∏–±–∫–µ 404 –∏–ª–∏ –¥—Ä—É–≥–æ–π –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `onError`
- –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω–µ—Ç URL, –Ω–æ –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫—É 404, –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç–æ
- –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `‚ö†Ô∏è [IMAGE] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (404 –∏–ª–∏ –¥—Ä—É–≥–∞—è): [URL]`
