# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–±–ª–∏—Ü—ã admins –≤ Supabase

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://supabase.com](https://supabase.com)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ **"SQL Editor"**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **"New query"** (–ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å)

### –®–∞–≥ 3: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `SUPABASE_ADMINS_MIGRATION.sql`:

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã admins
CREATE TABLE IF NOT EXISTS admins (
  id BIGSERIAL PRIMARY KEY,
  telegram_id BIGINT UNIQUE NOT NULL,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  created_by BIGINT,
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∞ (473842863)
INSERT INTO admins (telegram_id, created_by)
SELECT 473842863, 473842863
WHERE NOT EXISTS (SELECT 1 FROM admins WHERE telegram_id = 473842863);

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
CREATE INDEX IF NOT EXISTS idx_admins_telegram_id ON admins(telegram_id);

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Row Level Security (RLS)
ALTER TABLE admins ENABLE ROW LEVEL SECURITY;

-- –ü–æ–ª–∏—Ç–∏–∫–∞: –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤
CREATE POLICY "Admins can read admins list"
ON admins
FOR SELECT
USING (true);

-- –ü–æ–ª–∏—Ç–∏–∫–∞: –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∞–¥–º–∏–Ω–æ–≤
CREATE POLICY "Admins can insert admins"
ON admins
FOR INSERT
WITH CHECK (true);

-- –ü–æ–ª–∏—Ç–∏–∫–∞: –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å –∞–¥–º–∏–Ω–æ–≤
CREATE POLICY "Admins can delete admins"
ON admins
FOR DELETE
USING (true);
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```sql
SELECT * FROM admins;
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å:
- `telegram_id = 473842863`
- `created_by = 473842863`

## –í–∞–∂–Ω–æ!

‚ö†Ô∏è **RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–∞–∫ `USING (true)`** - —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å/–∏–∑–º–µ–Ω—è—Ç—å –∞–¥–º–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ Supabase –Ω–∞–ø—Ä—è–º—É—é.

**–ù–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ**, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–¥–º–∏–Ω-–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ middleware `adminOnly`
- Frontend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–¥–º–∏–Ω-–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ API `/api/admin/check`
- Supabase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É—Å–∏–ª–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏, –Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã.

## –ì–æ—Ç–æ–≤–æ! ‚úÖ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL:

1. –¢–∞–±–ª–∏—Ü–∞ `admins` —Å–æ–∑–¥–∞–Ω–∞ –≤ Supabase
2. –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω (ID: 473842863) –¥–æ–±–∞–≤–ª–µ–Ω
3. –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
4. RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend (–µ—Å–ª–∏ –æ–Ω –±—ã–ª –∑–∞–ø—É—â–µ–Ω)
- –í–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∫–∞–∫ –≥–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω (ID: 473842863)
- –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å "üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã"

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ –≥–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω (ID: 473842863)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã"**
4. –î–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å –≥–ª–∞–≤–Ω—ã–º –∞–¥–º–∏–Ω–æ–º
